{
    "docs": [
        {
            "location": "/", 
            "text": "\u5173\u4e8e\n\n\n\u5173\u4e8e\u533a\u5757\u94fe\u7684\u4e00\u5207\u3002", 
            "title": "\u9996\u9875"
        }, 
        {
            "location": "/#_1", 
            "text": "\u5173\u4e8e\u533a\u5757\u94fe\u7684\u4e00\u5207\u3002", 
            "title": "\u5173\u4e8e"
        }, 
        {
            "location": "/hyperledger/", 
            "text": "Hyperleger\u6e90\u7801\u5206\u6790\n\n\n\u4f1a\u5458\u670d\u52a1\uff08membership\uff09\n\n\n\u5171\u8bc6\u7b97\u6cd5\uff08consensus\uff09\n\n\n\u533a\u5757\u94fe\uff08blockchain\uff09\n\n\n\u4ea4\u6613\uff08transaction\uff09\n\n\n\u94fe\u7801\uff08chaincode\uff09\n\n\n\u4e8b\u4ef6\u6d41\uff08events\uff09\n\n\n\u4ee3\u7801\u8d21\u732e\uff08contributor\uff09", 
            "title": "Hyperledger\u6e90\u7801\u5206\u6790"
        }, 
        {
            "location": "/hyperledger/#hyperleger", 
            "text": "", 
            "title": "Hyperleger\u6e90\u7801\u5206\u6790"
        }, 
        {
            "location": "/hyperledger/#membership", 
            "text": "", 
            "title": "\u4f1a\u5458\u670d\u52a1\uff08membership\uff09"
        }, 
        {
            "location": "/hyperledger/#consensus", 
            "text": "", 
            "title": "\u5171\u8bc6\u7b97\u6cd5\uff08consensus\uff09"
        }, 
        {
            "location": "/hyperledger/#blockchain", 
            "text": "", 
            "title": "\u533a\u5757\u94fe\uff08blockchain\uff09"
        }, 
        {
            "location": "/hyperledger/#transaction", 
            "text": "", 
            "title": "\u4ea4\u6613\uff08transaction\uff09"
        }, 
        {
            "location": "/hyperledger/#chaincode", 
            "text": "", 
            "title": "\u94fe\u7801\uff08chaincode\uff09"
        }, 
        {
            "location": "/hyperledger/#events", 
            "text": "", 
            "title": "\u4e8b\u4ef6\u6d41\uff08events\uff09"
        }, 
        {
            "location": "/hyperledger/#contributor", 
            "text": "", 
            "title": "\u4ee3\u7801\u8d21\u732e\uff08contributor\uff09"
        }, 
        {
            "location": "/hyperledger/membership/", 
            "text": "", 
            "title": "\u4f1a\u5458\u670d\u52a1"
        }, 
        {
            "location": "/hyperledger/consensus/", 
            "text": "\u5171\u8bc6\u7b97\u6cd5\uff08consensus\uff09\n\n\npeer\u8282\u70b9\u542f\u52a8\u7684\u65f6\u5019\u6839\u636e\u914d\u7f6e\u6587\u4ef6core.yaml\u6587\u4ef6\u914d\u7f6e\u9879peer.validator.consensus.plugin\u9009\u62e9\u91c7\u7528\u54ea\u79cd\u5171\u8bc6\u7b97\u6cd5\u3002\u76ee\u524dFabric\u5b9e\u73b0\u4e86\u4e24\u79cd\u5171\u8bc6\u7b97\u6cd5NOOPS\u548cPBFT\uff0c\u9ed8\u8ba4\u662fNOOPS\uff1a\n\n\n\n\nNOOPS\uff1a\u662f\u4e00\u4e2a\u4f9b\u5f00\u53d1\u548c\u6d4b\u8bd5\u4f7f\u7528\u7684\u63d2\u4ef6\uff0c\u4f1a\u5904\u7406\u6240\u6709\u6536\u5230\u7684\u6d88\u606f\u3002\n\n\nPBFT\uff1aPBFT\u7b97\u6cd5\u5b9e\u73b0\u3002\n\n\n\n\n\u63d2\u4ef6\u63a5\u53e3\n\n\n\n\nConsenter\n\n\n\n\n// ExecutionConsumer allows callbacks from asycnhronous execution and statetransfer\ntype ExecutionConsumer interface {\n    Executed(tag interface{})                                // Called whenever Execute completes\n    Committed(tag interface{}, target *pb.BlockchainInfo)    // Called whenever Commit completes\n    RolledBack(tag interface{})                              // Called whenever a Rollback completes\n    StateUpdated(tag interface{}, target *pb.BlockchainInfo) // Called when state transfer completes, if target is nil, this indicates a failure and a new target should be supplied\n}\n\n// Consenter is used to receive messages from the network\n// Every consensus plugin needs to implement this interface\ntype Consenter interface {\n    RecvMsg(msg *pb.Message, senderHandle *pb.PeerID) error // Called serially with incoming messages from gRPC\n    ExecutionConsumer\n}\n\n\n\n\n\u6bcf\u4e2a\u5171\u8bc6\u63d2\u4ef6\u90fd\u9700\u8981\u5b9e\u73b0Consenter\u63a5\u53e3\uff0c\u5305\u62ecRecvMsg\u51fd\u6570\u548cExecutionConsumer\u63a5\u53e3\u91cc\u7684\u51fd\u6570\uff08\u53ef\u4ee5\u76f4\u63a5\u8fd4\u56de\uff09\u3002\n\n\nConsenter\u662fEngineImpl\u7684\u4e00\u4e2a\u6210\u5458\uff0cEngineImpl\u662f\u63a5\u53e3Engine\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u662f\u5728peer\u542f\u52a8\u7684\u65f6\u5019\u521b\u5efa\u7684\uff0c\u8fde\u540cImpl\u7684\u5176\u4ed6\u6210\u5458\u4e00\u8d77\u6ce8\u518c\u5230gRPC\u670d\u52a1\u4e2d\u3002\u5f53\u901a\u8fc7gRPC\u6536\u5230ProcessTransaction\u6d88\u606f\u65f6\uff0c\u6700\u7ec8\u4f1a\u8c03\u7528Consenter\u7684RecvMsg\u5904\u7406\u4ea4\u6613\u4fe1\u606f\u3002\n\n\nExecutionConsumer\u63a5\u53e3\u662f\u4e13\u95e8\u5904\u7406\u4e8b\u4ef6\u6d88\u606f\u7684\uff0c\u5b83\u662fStack\u7684\u6210\u5458Executor\u7684\u4e00\u4e2a\u63a5\u53e3\u3002coordinatorImpl\u662fExecutor\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5728\u5b9e\u4f8b\u5316coordinatorImpl\u7684\u65f6\u5019\u540c\u65f6\u8bbe\u7f6e\u81ea\u8eab\u4e3a\u6210\u5458\u53d8\u91cfManager\u7684\u4e8b\u4ef6\u6d88\u606f\u63a5\u6536\u8005\uff0c\u7136\u540e\u542f\u52a8\u4e00\u4e2a\u534f\u7a0b\u5faa\u73af\u5904\u7406\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\uff0c\u6839\u636e\u4e0d\u540c\u7684\u4e8b\u4ef6\u7c7b\u578b\uff0c\u8c03\u7528ExecutionConsumer\u7684\u4e0d\u540c\u51fd\u6570\u3002\u7279\u522b\u8bf4\u660e\u4e00\u4e0b\uff0c\u4e8b\u4ef6\u5728\u5185\u90e8\u662fchannel\u5b9e\u73b0\u7684\u751f\u4ea7\u8005/\u6d88\u8d39\u8005\u6a21\u578b\uff0c\u53ea\u6709\u4e00\u4e2a\u7f13\u51b2\u533a\uff0c\u5982\u679c\u5904\u7406\u4e0d\u53ca\u65f6\u4f1a\u51fa\u73b0\u6d88\u606f\u7b49\u5f85\u7684\u60c5\u51b5\uff0c\u5728\u5b9e\u9645\u4ea7\u54c1\u5316\u8fc7\u7a0b\u4e2d\u9700\u8981\u8fdb\u884c\u4f18\u5316\u3002\n\n\n\n\nStack\n\n\n\n\n// Stack is the set of stack-facing methods available to the consensus plugin\ntype Stack interface {\n    NetworkStack   // \u7f51\u7edc\u6d88\u606f\u53d1\u9001\u548c\u63a5\u6536\u63a5\u53e3\n    SecurityUtils  // Sign\u548cVerify\u63a5\u53e3\n    Executor       // \u4e8b\u4ef6\u6d88\u606f\u5904\u7406\u63a5\u53e3\n    LegacyExecutor // \u4ea4\u6613\u5904\u7406\u63a5\u53e3\n    LedgerManager  // \u63a7\u5236ledger\u7684\u72b6\u6001\n    ReadOnlyLedger // \u64cd\u4f5cblockchain\n    StatePersistor // \u64cd\u4f5c\u5171\u8bc6\u72b6\u6001\n}\n\n\n\n\n\u8fd9\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\u90fd\u662f\u5728helper\u4e2d\u5b9e\u73b0\u7684\uff0c\u8fd9\u91cc\u53ea\u662f\u7edf\u4e00\u7684\u62bd\u8c61\u51fa\u6765\u4fbf\u4e8e\u5b9e\u73b0\u5171\u8bc6\u7b97\u6cd5\u63d2\u4ef6\u7684\u65f6\u5019\u8c03\u7528\u3002\n\n\n\n\nnewTimerImpl\n\n\n\n\n// timerStart is used to deliver the start request to the eventTimer thread\ntype timerStart struct {\n    hard     bool          // Whether to reset the timer if it is running\n    event    Event         // What event to push onto the event queue\n    duration time.Duration // How long to wait before sending the event\n}\n\n// timerImpl is an implementation of Timer\ntype timerImpl struct {\n    threaded                   // Gives us the exit chan\n    timerChan \n-chan time.Time // When non-nil, counts down to preparing to do the event\n    startChan chan *timerStart // Channel to deliver the timer start events to the service go routine\n    stopChan  chan struct{}    // Channel to deliver the timer stop events to the service go routine\n    manager   Manager          // The event manager to deliver the event to after timer expiration\n}\n\n\n\n\ntimerStart\u6307\u5b9a\u4e86\u51e0\u4e2a\u53c2\u6570\uff1atimer\u8fd8\u672a\u5230\u65f6\u95f4\u524d\u662f\u5426\u53ef\u4ee5\u91cd\u7f6e\u3001\u6d88\u606f\u961f\u5217\u3001\u8d85\u65f6\u65f6\u95f4\u3002timerImpl\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u542f\u52a8\u4e00\u4e2a\u534f\u7a0b\uff0c\u5faa\u73af\u68c0\u6d4bstartChan\u3001stopChan\u3001timerChan\u3001event\u3001exit\u7b49\u662f\u5426\u6d88\u606f\uff0c\u5bf9timer\u8fdb\u884c\u64cd\u4f5c\uff0c\u6bd4\u5982\u505c\u6b62\u3001\u91cd\u542f\u7b49\u3002\n\n\n\n\nMessageFan\n\n\n\n\n// Message encapsulates an OpenchainMessage with sender information\ntype Message struct {\n    Msg    *pb.Message\n    Sender *pb.PeerID\n}\n\n// MessageFan contains the reference to the peer's MessageHandlerCoordinator\ntype MessageFan struct {\n    ins  map[*pb.PeerID]\n-chan *Message\n    out  chan *Message\n    lock sync.Mutex\n}\n\n\n\n\nMessageFan\u7c7b\u4f3c\u98ce\u6247\uff0c\u628a\u4e0d\u540cPeerID\u7684\u6d88\u606f\u6c47\u805a\u5230\u4e00\u4e2a\u901a\u9053\u7edf\u4e00\u8f93\u51fa\u3002\n\n\nNOOPS\n\n\nNOOPS\u662f\u4e3a\u4e86\u6f14\u793a\u5171\u8bc6\u7b97\u6cd5\u7684\uff0c\u8981\u5b9e\u73b0\u4e00\u4e2a\u5171\u8bc6\u7b97\u6cd5\u7684\u63d2\u4ef6\uff0c\u53ef\u4ee5\u770b\u770b\u5b83\u90fd\u5b9e\u73b0\u4e86\u54ea\u4e9b\u529f\u80fd\uff1a\n\n\n\n\nGetNoops\u8fd4\u56de\u4e00\u4e2a\u63d2\u4ef6\u5bf9\u8c61\nNOOPS\u548cPBFT\u90fd\u662f\u5355\u4f8b\u6a21\u5f0f\uff0c\u8f93\u5165\u53c2\u6570\u662fStack\u63a5\u53e3\uff1a\n\n\n\n\n// GetNoops returns a singleton of NOOPS\nfunc GetNoops(c consensus.Stack) consensus.Consenter {\n    if iNoops != nil {\n        iNoops = newNoops(c)\n    }\n    return iNoops\n}\n\n\n\n\n\n\n\u5b9e\u73b0Consenter\u63a5\u53e3\n\u5305\u62ecRecvMsg\u3001Executed\u3001Committed\u3001RolledBack\u3001StateUpdated\u7b49\u3002\n\n\n\n\nNOOPS\u53ea\u5b9e\u73b0\u4e86RecvMsg\u63a5\u53e3\uff0c\u5904\u7406\u4e86Message_CHAIN_TRANSACTION\u548cMessage_CONSENSUS\u6d88\u606f\u3002\u5bf9Message_CHAIN_TRANSACTION\u6d88\u606f\u7684\u5904\u7406\u5c31\u662f\u628a\u6d88\u606f\u7c7b\u578b\u4fee\u6539\u6210Message_CONSENSUS\u518d\u5e7f\u64ad\u51fa\u53bb\uff0c\u5bf9Message_CONSENSUS\u6d88\u606f\u7684\u5904\u7406\u5c31\u662f\u4fdd\u5b58\u4e0b\u6765\u3002\n\n\nPBFT\n\n\nPBFT\u534f\u8bae\n\n\n\u524d\u63d0\u5047\u8bbe\n\n\n\n\n\u5206\u5e03\u5f0f\u8282\u70b9\u901a\u8fc7\u7f51\u7edc\u662f\u8fde\u63a5\u5728\u4e00\u8d77\u7684\n\n\n\u7f51\u7edc\u8282\u70b9\u53d1\u9001\u7684\u6d88\u606f\u53ef\u80fd\u4f1a\u4e22\uff0c\u53ef\u80fd\u4f1a\u5ef6\u8fdf\u5230\u8fbe\uff0c\u4e5f\u53ef\u80fd\u4f1a\u91cd\u590d\uff0c\u5230\u8fbe\u987a\u5e8f\u4e5f\u53ef\u80fd\u662f\u4e71\u7684\n\n\n\n\n\u4e3a\u4ec0\u4e48\u81f3\u5c11\u89813f+1\u4e2a\u8282\u70b9\n\n\n\n\n\u6700\u574f\u7684\u60c5\u51b5\u662f\uff1af\u4e2a\u8282\u70b9\u662f\u6709\u95ee\u9898\u7684\uff0c\u7531\u4e8e\u5230\u8fbe\u987a\u5e8f\u7684\u95ee\u9898\uff0c\u6709\u53ef\u80fdf\u4e2a\u6709\u95ee\u9898\u7684\u8282\u70b9\u6bd4\u6b63\u5e38\u7684f\u4e2a\u8282\u70b9\u5148\u8fd4\u56de\u6d88\u606f\uff0c\u53c8\u8981\u4fdd\u8bc1\u6536\u5230\u7684\u6b63\u5e38\u7684\u8282\u70b9\u6bd4\u6709\u95ee\u9898\u7684\u8282\u70b9\u591a\uff0c\u6240\u4ee5\u9700\u8981\u6ee1\u8db3N-f-f\nf =\n N\n3f\uff0c\u6240\u4ee5\u81f3\u5c113f+1\u4e2a\u8282\u70b9\n\n\n\n\n\u672f\u8bed\n\n\n\n\nclient\uff1a\u53d1\u51fa\u8c03\u7528\u8bf7\u6c42\u7684\u5b9e\u4f53\n\n\nview\uff1a\u8fde\u7eed\u7684\u7f16\u53f7\n\n\nreplica\uff1a\u7f51\u7edc\u8282\u70b9\n\n\nprimary\uff1a\u4e3b\u8282\u70b9\uff0c\u8d1f\u8d23\u751f\u6210\u6d88\u606f\u5e8f\u5217\u53f7\n\n\nbackup\uff1a\u652f\u6491\u8282\u70b9\n\n\nstate\uff1a\u8282\u70b9\u72b6\u6001\n\n\n\n\n3\u9636\u6bb5\u534f\u8bae\n\n\n\n\n\u4eceprimary\u6536\u5230\u6d88\u606f\u5f00\u59cb\uff0c\u6bcf\u4e2a\u6d88\u606f\u90fd\u4f1a\u6709view\u7684\u7f16\u53f7\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u68c0\u67e5\u662f\u5426\u548c\u81ea\u5df1\u7684view\u662f\u76f8\u540c\u7684\uff0c\u4ee3\u8868\u662f\u54ea\u4e2a\u8282\u70b9\u53d1\u9001\u51fa\u6765\u7684\u6d88\u606f\uff0c\u6e90\u5934\u5728\u54ea\u91cc\uff0cclient\u6536\u5230\u6d88\u606f\u4e5f\u4f1a\u68c0\u67e5\u8be5\u8bf7\u6c42\u8fd4\u56de\u7684\u6240\u6709\u6d88\u606f\u662f\u5426\u662f\u76f8\u540c\u7684view\u3002\u5982\u679c\u8fc7\u7a0b\u4e2d\u53d1\u73b0view\u4e0d\u76f8\u540c\uff0c\u6d88\u606f\u5c31\u4e0d\u4f1a\u88ab\u5904\u7406\u3002\u9664\u4e86\u68c0\u67e5view\u4e4b\u5916\uff0c\u6bcf\u4e2a\u8282\u70b9\u6536\u5230\u6d88\u606f\u7684\u65f6\u5019\u90fd\u4f1a\u68c0\u67e5\u5bf9\u5e94\u7684\u5e8f\u5217\u53f7n\u662f\u5426\u5339\u914d\uff0c\u8fd8\u4f1a\u68c0\u67e5\u76f8\u540cview\u548cn\u7684PRE-PREPARE\u3001PREPARE\u6d88\u606f\u662f\u5426\u5339\u914d\uff0c\u4ece\u534f\u8bae\u7684\u8fde\u7eed\u6027\u4e0a\u63d0\u4f9b\u4e86\u4e00\u5b9a\u7a0b\u5ea6\u7684\u5b89\u5168\u3002\n\n\n\u6bcf\u4e2a\u8282\u70b9\u6536\u5230\u5176\u4ed6\u8282\u70b9\u53d1\u9001\u7684\u6d88\u606f\uff0c\u80fd\u591f\u9a8c\u8bc1\u5176\u7b7e\u540d\u786e\u8ba4\u53d1\u9001\u6765\u6e90\uff0c\u4f46\u5e76\u4e0d\u80fd\u786e\u8ba4\u53d1\u9001\u8282\u70b9\u662f\u5426\u4f2a\u9020\u4e86\u6d88\u606f\uff0cPBFT\u91c7\u7528\u7684\u529e\u6cd5\u5c31\u662f\u6570\u6570\uff0c\u770b\u6709\u591a\u5c11\u8282\u70b9\u53d1\u9001\u4e86\u76f8\u540c\u7684\u6d88\u606f\uff0c\u5728\u6709\u95ee\u9898\u7684\u8282\u70b9\u6570\u6709\u9650\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u80fd\u5224\u65ad\u54ea\u4e9b\u8282\u70b9\u53d1\u9001\u7684\u6d88\u606f\u662f\u771f\u5b9e\u7684\u3002REQUEST\u548cPRE-PREPARE\u9636\u6bb5\u8fd8\u4e0d\u6d89\u53ca\u5230\u6d88\u606f\u7684\u771f\u5b9e\u6027\uff0c\u53ea\u662f\u72ec\u7acb\u7684\u751f\u6210\u6216\u8005\u786e\u8ba4view\u548c\u5e8f\u5217\u53f7n\uff0c\u6240\u4ee5\u6536\u5230\u6d88\u606f\u5224\u65ad\u6765\u6e90\u540e\u5c31\u5e7f\u64ad\u51fa\u53bb\u4e86\u3002PREPARE\u9636\u6bb5\u5f00\u59cb\u4f1a\u6c47\u603b\u6d88\u606f\uff0c\u901a\u8fc7\u6570\u6570\u5224\u65ad\u6d88\u606f\u7684\u771f\u5b9e\u6027\u3002PREPARE\u6d88\u606f\u662f\u6536\u5230PRE-PREPARE\u6d88\u606f\u7684\u8282\u70b9\u53d1\u9001\u51fa\u6765\u7684\uff0cprimary\u6536\u5230REQUEST\u6d88\u606f\u540e\u4e0d\u4f1a\u7ed9\u81ea\u5df1\u53d1\u9001PRE-PREPARE\u6d88\u606f\uff0c\u4e5f\u4e0d\u4f1a\u53d1\u9001PRE-PREPARE\u6d88\u606f\uff0c\u6240\u4ee5\u4e00\u4e2a\u8282\u70b9\u6536\u5230\u7684\u6d88\u606f\u6570\u6ee1\u8db32f+1-1=2f\u4e2a\u5c31\u80fd\u6ee1\u8db3\u6ca1\u95ee\u9898\u7684\u8282\u70b9\u6570\u6bd4\u6709\u95ee\u9898\u8282\u70b9\u591a\u4e86\uff08\u5305\u62ec\u81ea\u8eab\u8282\u70b9\uff09\u3002COMMIT\u9636\u6bb5primary\u8282\u70b9\u4e5f\u4f1a\u5728\u6536\u5230PREPARE\u6d88\u606f\u540e\u53d1\u9001COMMIT\u6d88\u606f\uff0c\u6240\u4ee5\u6536\u5230\u7684\u6d88\u606f\u6570\u6ee1\u8db32f+1\u4e2a\u5c31\u80fd\u6ee1\u8db3\u6ca1\u95ee\u9898\u7684\u8282\u70b9\u6570\u6bd4\u6709\u95ee\u9898\u8282\u70b9\u591a\u4e86\uff08\u5305\u62ec\u81ea\u8eab\u8282\u70b9\uff09\u3002\n\n\nPRE-PREPARE\u548cPREPARE\u9636\u6bb5\u4fdd\u8bc1\u4e86\u6240\u6709\u6b63\u5e38\u7684\u8282\u70b9\u5bf9\u8bf7\u6c42\u7684\u5904\u7406\u987a\u5e8f\u8fbe\u6210\u4e00\u81f4\uff0c\u5b83\u80fd\u591f\u4fdd\u8bc1\u5982\u679c \nPREPARE(m, v, n, i)\n \u662f\u771f\u7684\u8bdd\uff0c\nPREPARE(m\n, v, n, j)\n \u5c31\u4e00\u5b9a\u662f\u5047\u7684\uff0c\u5176\u4e2dj\u662f\u4efb\u610f\u4e00\u4e2a\u6b63\u5e38\u8282\u70b9\u7684\u7f16\u53f7\uff0c\u53ea\u8981 \nD(m) != D(m\n)\n\u3002\u56e0\u4e3a\u5982\u679c\u67093f+1\u4e2a\u8282\u70b9\uff0c\u81f3\u5c11\u6709f+1\u4e2a\u6b63\u5e38\u7684\u8282\u70b9\u53d1\u9001\u4e86PRE-PREPARE\u548cPREPARE\u6d88\u606f\uff0c\u6240\u4ee5\u5982\u679c\nPREPARE(m\n, v, n, j)\n \u662f\u771f\u7684\u8bdd\uff0c\u8fd9\u4e9b\u8282\u70b9\u4e2d\u5c31\u81f3\u5c11\u6709\u4e00\u4e2a\u8282\u70b9\u53d1\u4e86\u4e0d\u540c\u7684PRE-PREPARE\u6216\u8005PREPARE\u6d88\u606f\uff0c\u8fd9\u548c\u5b83\u662f\u6b63\u5e38\u7684\u8282\u70b9\u4e0d\u4e00\u81f4\u3002\u5f53\u7136\uff0c\u8fd8\u6709\u4e00\u4e2a\u5047\u8bbe\u662f\u5b89\u5168\u5f3a\u5ea6\u662f\u8db3\u591f\u7684\uff0c\u80fd\u591f\u4fdd\u8bc1\nm != m\n\u65f6\uff0c\nD(m) != D(m\n)\n\uff0c\nD(m)\n \u662f\u6d88\u606f\nm\n\u7684\u6458\u8981\u3002\n\n\n\u786e\u5b9a\u597d\u4e86\u6bcf\u4e2a\u8bf7\u6c42\u7684\u5904\u7406\u987a\u5e8f\uff0c\u600e\u4e48\u80fd\u4fdd\u8bc1\u6309\u7167\u987a\u5e8f\u6267\u884c\u5462\uff1f\u7f51\u7edc\u6d88\u606f\u90fd\u662f\u65e0\u5e8f\u5230\u8fbe\u7684\uff0c\u6bcf\u4e2a\u8282\u70b9\u8fbe\u6210\u4e00\u81f4\u7684\u987a\u5e8f\u4e5f\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6709\u53ef\u80fd\u5728\u67d0\u4e2a\u8282\u70b9\u4e0an\u6bd4n-1\u5148\u8fbe\u6210\u4e00\u81f4\u3002\u5176\u5b9e\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u628aPRE-PREPARE\u3001PREPARE\u548cCOMMIT\u6d88\u606f\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u4eec\u90fd\u4f1a\u6709\u4e00\u4e2a\u72b6\u6001\u6765\u6807\u8bc6\u73b0\u5728\u5904\u7406\u7684\u60c5\u51b5\uff0c\u7136\u540e\u518d\u6309\u987a\u5e8f\u5904\u7406\u3002\u800c\u4e14\u5e8f\u5217\u53f7n\u5728\u4e0d\u540cview\u4e2d\u4e5f\u662f\u8fde\u7eed\u7684\uff0c\u6240\u4ee5n-1\u5904\u7406\u5b8c\u4e86\uff0c\u5904\u7406n\u5c31\u597d\u4e86\u3002\n\n\nVIEW-CHANGE\n\n\n\n\n\u4e0a\u56fe\u662f\u53d1\u751fVIEW-CHANGE\u7684\u4e00\u79cd\u60c5\u51b5\uff0c\u5c31\u662f\u8282\u70b9\u6b63\u5e38\u6536\u5230PRE-PREPARE\u6d88\u606f\u4ee5\u540e\u90fd\u4f1a\u542f\u52a8\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u5982\u679c\u5728\u8bbe\u7f6e\u7684\u65f6\u95f4\u5185\u90fd\u6ca1\u6709\u6536\u5230\u56de\u590d\uff0c\u5c31\u4f1a\u89e6\u53d1VIEW-CHANGE\uff0c\u8be5\u8282\u70b9\u5c31\u4e0d\u4f1a\u518d\u63a5\u6536\u9664CHECKPOINT\n\u3001VIEW-CHANGE\u548cNEW-VIEW\u7b49\u6d88\u606f\u5916\u7684\u5176\u4ed6\u6d88\u606f\u4e86\u3002NEW-VIEW\u662f\u7531\u65b0\u4e00\u8f6e\u7684primary\u8282\u70b9\u53d1\u9001\u7684\uff0c\nO\n\u662f\u4e0d\u5305\u542b\u634e\u5e26\u7684REQUEST\u7684PRE-PREPARE\u6d88\u606f\u96c6\u5408\uff0c\u8ba1\u7b97\u65b9\u6cd5\u5982\u4e0b\uff1a\n\n primary\u8282\u70b9\u786e\u5b9a\nV\n\u4e2d\u6700\u65b0\u7684\u7a33\u5b9a\u68c0\u67e5\u70b9\u5e8f\u5217\u53f7\nmin-s\n\u548cPRE-PREPARE\u6d88\u606f\u4e2d\u6700\u5927\u7684\u5e8f\u5217\u53f7\nmax-s\n\n\n \u5bf9\nmin-s\n\u548c\nmax-s\n\u4e4b\u95f4\u6bcf\u4e2a\u5e8f\u5217\u53f7n\u90fd\u751f\u6210\u4e00\u4e2aPRE-PREPARE\u6d88\u606f\u3002\u8fd9\u53ef\u80fd\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n  - \nP\n\u7684VIEW-CHANGE\u6d88\u606f\u4e2d\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u96c6\u5408\uff0c\u5e8f\u5217\u53f7\u662fn\n  - \u4e0d\u5b58\u5728\u4e0a\u9762\u7684\u96c6\u5408\n\n\n\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u4f1a\u751f\u6210\u65b0\u7684PRE-PREPARE\u6d88\u606f\n\ud835\udf82\np\n\uff0c\u5176\u4e2d\nn\n\u662f\nV\n\u4e2d\u6700\u5927\u7684\nv\n\u5e8f\u5217\u53f7\uff0c\nd\n\u662f\u5bf9\u5e94\u7684PRE-PREPARE\u6d88\u606f\u6458\u8981\u3002\u7b2c\u4e8c\u60c5\u51b5\uff0cPRE-PREPARE\u6d88\u606f\u7684\nd\n\u662f\u7279\u6b8a\u7684\u7a7a\u6d88\u606f\u6458\u8981\u3002\n\n\nprimary\u8282\u70b9\u53d1\u9001\u5b8cNEW-VIEW\u6d88\u606f\u5e76\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d\u5c31\u5207\u6362\u5230\nv\n+1\u7684view\u4e2d\uff0c\u5f00\u59cb\u63a5\u6536\u6240\u6709\u7684\u6d88\u606f\u4e86\u3002\u5176\u4ed6\u8282\u70b9\u4e5f\u5728\u6536\u5230NEW-VIEW\u6d88\u606f\u540e\u9700\u8981\u9a8c\u8bc1\u7b7e\u540d\u662f\u5426\u6b63\u786e\uff0c\u8fd8\u8981\u9a8c\u8bc1\nO\n\u6d88\u606f\u7684\u6b63\u786e\u6027\uff0c\u90fd\u6ca1\u95ee\u9898\u5c31\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d\uff0c\u5e7f\u64ad\u5b8c\nO\n\u4e2d\u7684PRE-PREPARE\u6d88\u606f\u540e\u5c31\u5207\u6362\u5230\nv\n+1\u7684view\u4e2d\uff0cVIEW-CHANGE\u5c31\u7b97\u5b8c\u6210\u4e86\u3002\n\n\n\u5783\u573e\u56de\u6536\n\n\n\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u628a\u6bcf\u6761\u6d88\u606f\u4fdd\u5b58\u4e0b\u6765\uff0c\u9664\u975e\u5b83\u786e\u8ba4\u8fd9\u4e2a\u8bf7\u6c42\u81f3\u5c11\u88ab\nf\n+1\u4e2a\u6b63\u5e38\u8282\u70b9\u5904\u7406\u8fc7\uff0c\u800c\u4e14\u8fd8\u8981\u80fd\u5728VIEW-CHANGE\u4e2d\u8bc1\u660e\u8fd9\u4e00\u70b9\u3002\u53e6\u5916\uff0c\u5982\u679c\u4e00\u4e9b\u8282\u70b9\u9519\u8fc7\u4e86\u5176\u4ed6\u7684\u6b63\u5e38\u8282\u70b9\u90fd\u4e22\u6389\u7684\u6d88\u606f\uff0c\u5b83\u9700\u8981\u4f20\u8f93\u90e8\u5206\u6216\u8005\u5168\u90e8\u7684\u670d\u52a1\u72b6\u6001\u6765\u4fdd\u5b58\u540c\u6b65\u3002\u6240\u4ee5\u8282\u70b9\u9700\u8981\u8bc1\u660e\u81ea\u5df1\u7684\u72b6\u6001\u662f\u6b63\u786e\u7684\u3002\n\n\n\u5982\u679c\u6bcf\u4e2a\u64cd\u4f5c\u5b8c\u6210\u90fd\u6536\u96c6\u8bc1\u636e\u8bc1\u660e\u81ea\u5df1\u7684\u72b6\u6001\u6ca1\u6709\u95ee\u9898\u6210\u672c\u5c31\u592a\u9ad8\u4e86\u3002\u5b9e\u9645\u7684\u505a\u6cd5\u53ef\u4ee5\u662f\u5468\u671f\u6027\u7684\uff0c\u6bd4\u5982\u8bf7\u6c42\u7684\u5e8f\u53f7\u662f100\u7684\u500d\u6570\u65f6\u3002\u8fd9\u79cd\u8bf7\u6c42\u6267\u884c\u5b8c\u7684\u72b6\u6001\u5c31\u53eb\u4e00\u4e2a\u68c0\u67e5\u70b9\uff0c\u9a8c\u8bc1\u8fc7\u7684\u68c0\u67e5\u70b9\u53eb\u7a33\u5b9a\u68c0\u67e5\u70b9\u3002\u6bcf\u4e2a\u8282\u70b9\u7ef4\u62a4\u4e86\u591a\u4e2a\u72b6\u6001\uff0c\u6700\u65b0\u7684\u7a33\u5b9a\u68c0\u67e5\u70b9\u3001\u591a\u4e2a\u4e0d\u7a33\u5b9a\u7684\u68c0\u67e5\u70b9\u548c\u5f53\u524d\u72b6\u6001\u3002\n\n\n\u9a8c\u8bc1\u4e00\u4e2a\u68c0\u67e5\u70b9\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a\n\n \u8282\u70b9\ni\n\u751f\u6210\u4e00\u4e2a\u68c0\u67e5\u70b9\uff0c\u5e7f\u64ad\n\ud835\udf82\ni\n\u7ed9\u5176\u4ed6\u7684\u8282\u70b9\n\n \u6bcf\u4e2a\u8282\u70b9\u90fd\u68c0\u67e5\u81ea\u5df1\u7684\u65e5\u5fd7\uff0c\u5982\u679c\u67092\nf\n+1\u4e2a\u5e8f\u5217\u53f7\u4e3a\nn\n\uff0c\u6d88\u606f\u6458\u8981\nd\n\u76f8\u540c\u7684\u4e0d\u540c\u8282\u70b9\u53d1\u9001\u8fc7\u6765\u7684CHECKPOINT\u6d88\u606f\uff0c\u5c31\u662f\u7a33\u5b9a\u68c0\u67e5\u70b9\u7684\u8bc1\u636e\n\n\n\u786e\u8ba4\u4e86\u6700\u65b0\u7684\u7a33\u5b9a\u68c0\u67e5\u70b9\uff0c\u5c31\u53ef\u4ee5\u628a\u4e4b\u524d\u7684\u68c0\u67e5\u70b9\u548c\u68c0\u67e5\u70b9\u6d88\u606f\u90fd\u5220\u6389\u4e86\uff0c\u8fd8\u53ef\u4ee5\u5220\u6389\u5e8f\u5217\u53f7\u5c0f\u4e8e\nn\n\u7684\u6240\u6709PRE-PREPARE\u3001PREPARE\u3001COMMIT\u6d88\u606f\uff0c\u51cf\u5c11\u5360\u7528\u7684\u7a7a\u95f4\u3002\n\n\n\u4e00\u4e9b\u4f18\u5316\u63aa\u65bd\n\n\nPBFT\u534f\u8bae\u91cc\u63d0\u4e86\u51e0\u79cd\u4f18\u5316\u63aa\u65bd\uff1a\n\n\n\n\n\u51cf\u5c11\u901a\u4fe1\n\n\n\u5c3d\u91cf\u907f\u514d\u53d1\u9001\u5927\u91cf\u7684\u56de\u590d\u6d88\u606f\uff0cclient\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u8282\u70b9\u6765\u53d1\u9001\u56de\u590d\u6d88\u606f\uff0c\u5176\u4ed6\u8282\u70b9\u5c31\u53ea\u9700\u8981\u56de\u590d\u6d88\u606f\u7684\u6458\u8981\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u80fd\u5728\u51cf\u5c11\u5e26\u5bbd\u548cCPU\u5f00\u9500\u7684\u60c5\u51b5\u4e0b\u9a8c\u8bc1\u7ed3\u679c\u7684\u6b63\u786e\u6027\n\n\n\u8c03\u7528\u64cd\u4f5c\u6b65\u9aa4\u4ece5\u6b65\u51cf\u5c11\u52304\u6b65\u3002\u6b63\u5e38\u7684\u8c03\u7528\u9700\u8981\u7ecf\u8fc7REQUEST\u3001PRE-PREPARE\u3001PREPARE\u3001COMMIT\u3001REPLY\u7b495\u6b65\uff0c\u8282\u70b9\u53ef\u4ee5\u5728PREPARE\u540e\u5c31\u5904\u7406\u6d88\u606f\uff0c\u7136\u540e\u628a\u6267\u884c\u7ed3\u679c\u53d1\u9001\u7ed9client\uff0c\u5982\u679c\u67092\nf\n+1\u4e2a\u76f8\u540c\u7ed3\u679c\u7684\u6d88\u606f\uff0c\u8bf7\u6c42\u5c31\u7ed3\u675f\u4e86\uff0c\u5426\u5219\u8fd8\u662f\u6b63\u5e38\u76845\u6b65\uff0c\u51fa\u73b0\u5f02\u5e38\u7684\u8bdd\u5c31\u56de\u9000\u72b6\u6001\n\n\n\n\n\u63d0\u5347\u53ea\u8bfb\u64cd\u4f5c\u7684\u6548\u7387\u3002\u8282\u70b9\u53ea\u8981\u80fd\u786e\u8ba4\u64cd\u4f5c\u662f\u6b63\u786e\u800c\u4e14\u662f\u53ea\u8bfb\u7684\uff0c\u5c31\u53ef\u4ee5\u7acb\u5373\u6267\u884c\uff0c\u7b49\u5f85\u72b6\u6001\u63d0\u4ea4\u4ee5\u540e\u5c31\u56de\u590d\u7ed9client\n\n\n\n\n\n\n\u8282\u70b9\u91c7\u7528\u7b7e\u540d\u6765\u9a8c\u8bc1\u6d88\u606f\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\u53ef\u4ee5\u8fd9\u4e48\u7528\uff1a\n\n\n\n\n\u516c\u94a5\u7b7e\u540d\uff1a\u4e3b\u8981\u662fVIEW_CHANGE\u3001NEW_VIEW\u6d88\u606f\u7684\u65f6\u5019\u7528\n\n\nMAC\uff1a\u5176\u4ed6\u5730\u65b9\u7684\u6d88\u606f\u4f20\u8f93\u90fd\u662f\u8fd9\u79cd\u65b9\u6cd5\uff0c\u8fd9\u6837\u80fd\u51cf\u5c11\u6027\u80fd\u74f6\u9888\u3002MAC\u6d88\u606f\u672c\u6765\u662f\u4e0d\u80fd\u9a8c\u8bc1\u6d88\u606f\u7684\u771f\u5b9e\u6027\uff0c\u4f46\u662f\u8bba\u6587\u4f5c\u8005\u63d0\u4f9b\u4e86\u4e00\u4e2a\u529e\u6cd5\u6765\u7ed5\u8fc7\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u4f1a\u7528\u4e00\u4e9b\u89c4\u5219\uff0c\u6bd4\u5982\u4e24\u4e2a\u6b63\u5e38\u8282\u70b9\u76f8\u540c\u7684v\u548cn\uff0c\u8bf7\u6c42\u4e5f\u662f\u4e00\u6837\u7684\u3002\n\n\n\n\n\u5176\u4ed6\n\n\n\u534f\u8bae\u91cc\u9762\u53ea\u4ecb\u7ecd\u4e86\u4e3b\u8981\u7684\u6d41\u7a0b\uff0c\u5f88\u591a\u5b9e\u73b0\u7684\u90e8\u5206\u5e76\u6ca1\u6709\u8bf4\u660e\uff0c\u6bd4\u5982\u6bcf\u4e2a\u8282\u70b9\u6536\u5230VIEW-CHANGE\u540e\u600e\u4e48\u5904\u7406\uff0cMAC\u534f\u8bae\u7684\u5171\u4eab\u5bc6\u94a5\u600e\u4e48\u5206\u914d\uff0c\u5982\u679c\u5e94\u5bf9DDos\u653b\u51fb\u7b49\u7b49\u3002\n\n\nPBFT\u5b9e\u73b0", 
            "title": "\u5171\u8bc6\u7b97\u6cd5"
        }, 
        {
            "location": "/hyperledger/consensus/#consensus", 
            "text": "peer\u8282\u70b9\u542f\u52a8\u7684\u65f6\u5019\u6839\u636e\u914d\u7f6e\u6587\u4ef6core.yaml\u6587\u4ef6\u914d\u7f6e\u9879peer.validator.consensus.plugin\u9009\u62e9\u91c7\u7528\u54ea\u79cd\u5171\u8bc6\u7b97\u6cd5\u3002\u76ee\u524dFabric\u5b9e\u73b0\u4e86\u4e24\u79cd\u5171\u8bc6\u7b97\u6cd5NOOPS\u548cPBFT\uff0c\u9ed8\u8ba4\u662fNOOPS\uff1a   NOOPS\uff1a\u662f\u4e00\u4e2a\u4f9b\u5f00\u53d1\u548c\u6d4b\u8bd5\u4f7f\u7528\u7684\u63d2\u4ef6\uff0c\u4f1a\u5904\u7406\u6240\u6709\u6536\u5230\u7684\u6d88\u606f\u3002  PBFT\uff1aPBFT\u7b97\u6cd5\u5b9e\u73b0\u3002", 
            "title": "\u5171\u8bc6\u7b97\u6cd5\uff08consensus\uff09"
        }, 
        {
            "location": "/hyperledger/consensus/#_1", 
            "text": "Consenter   // ExecutionConsumer allows callbacks from asycnhronous execution and statetransfer\ntype ExecutionConsumer interface {\n    Executed(tag interface{})                                // Called whenever Execute completes\n    Committed(tag interface{}, target *pb.BlockchainInfo)    // Called whenever Commit completes\n    RolledBack(tag interface{})                              // Called whenever a Rollback completes\n    StateUpdated(tag interface{}, target *pb.BlockchainInfo) // Called when state transfer completes, if target is nil, this indicates a failure and a new target should be supplied\n}\n\n// Consenter is used to receive messages from the network\n// Every consensus plugin needs to implement this interface\ntype Consenter interface {\n    RecvMsg(msg *pb.Message, senderHandle *pb.PeerID) error // Called serially with incoming messages from gRPC\n    ExecutionConsumer\n}  \u6bcf\u4e2a\u5171\u8bc6\u63d2\u4ef6\u90fd\u9700\u8981\u5b9e\u73b0Consenter\u63a5\u53e3\uff0c\u5305\u62ecRecvMsg\u51fd\u6570\u548cExecutionConsumer\u63a5\u53e3\u91cc\u7684\u51fd\u6570\uff08\u53ef\u4ee5\u76f4\u63a5\u8fd4\u56de\uff09\u3002  Consenter\u662fEngineImpl\u7684\u4e00\u4e2a\u6210\u5458\uff0cEngineImpl\u662f\u63a5\u53e3Engine\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u662f\u5728peer\u542f\u52a8\u7684\u65f6\u5019\u521b\u5efa\u7684\uff0c\u8fde\u540cImpl\u7684\u5176\u4ed6\u6210\u5458\u4e00\u8d77\u6ce8\u518c\u5230gRPC\u670d\u52a1\u4e2d\u3002\u5f53\u901a\u8fc7gRPC\u6536\u5230ProcessTransaction\u6d88\u606f\u65f6\uff0c\u6700\u7ec8\u4f1a\u8c03\u7528Consenter\u7684RecvMsg\u5904\u7406\u4ea4\u6613\u4fe1\u606f\u3002  ExecutionConsumer\u63a5\u53e3\u662f\u4e13\u95e8\u5904\u7406\u4e8b\u4ef6\u6d88\u606f\u7684\uff0c\u5b83\u662fStack\u7684\u6210\u5458Executor\u7684\u4e00\u4e2a\u63a5\u53e3\u3002coordinatorImpl\u662fExecutor\u7684\u4e00\u4e2a\u5b9e\u4f8b\uff0c\u5728\u5b9e\u4f8b\u5316coordinatorImpl\u7684\u65f6\u5019\u540c\u65f6\u8bbe\u7f6e\u81ea\u8eab\u4e3a\u6210\u5458\u53d8\u91cfManager\u7684\u4e8b\u4ef6\u6d88\u606f\u63a5\u6536\u8005\uff0c\u7136\u540e\u542f\u52a8\u4e00\u4e2a\u534f\u7a0b\u5faa\u73af\u5904\u7406\u63a5\u6536\u5230\u7684\u4e8b\u4ef6\uff0c\u6839\u636e\u4e0d\u540c\u7684\u4e8b\u4ef6\u7c7b\u578b\uff0c\u8c03\u7528ExecutionConsumer\u7684\u4e0d\u540c\u51fd\u6570\u3002\u7279\u522b\u8bf4\u660e\u4e00\u4e0b\uff0c\u4e8b\u4ef6\u5728\u5185\u90e8\u662fchannel\u5b9e\u73b0\u7684\u751f\u4ea7\u8005/\u6d88\u8d39\u8005\u6a21\u578b\uff0c\u53ea\u6709\u4e00\u4e2a\u7f13\u51b2\u533a\uff0c\u5982\u679c\u5904\u7406\u4e0d\u53ca\u65f6\u4f1a\u51fa\u73b0\u6d88\u606f\u7b49\u5f85\u7684\u60c5\u51b5\uff0c\u5728\u5b9e\u9645\u4ea7\u54c1\u5316\u8fc7\u7a0b\u4e2d\u9700\u8981\u8fdb\u884c\u4f18\u5316\u3002   Stack   // Stack is the set of stack-facing methods available to the consensus plugin\ntype Stack interface {\n    NetworkStack   // \u7f51\u7edc\u6d88\u606f\u53d1\u9001\u548c\u63a5\u6536\u63a5\u53e3\n    SecurityUtils  // Sign\u548cVerify\u63a5\u53e3\n    Executor       // \u4e8b\u4ef6\u6d88\u606f\u5904\u7406\u63a5\u53e3\n    LegacyExecutor // \u4ea4\u6613\u5904\u7406\u63a5\u53e3\n    LedgerManager  // \u63a7\u5236ledger\u7684\u72b6\u6001\n    ReadOnlyLedger // \u64cd\u4f5cblockchain\n    StatePersistor // \u64cd\u4f5c\u5171\u8bc6\u72b6\u6001\n}  \u8fd9\u4e2a\u63a5\u53e3\u7684\u5b9e\u73b0\u90fd\u662f\u5728helper\u4e2d\u5b9e\u73b0\u7684\uff0c\u8fd9\u91cc\u53ea\u662f\u7edf\u4e00\u7684\u62bd\u8c61\u51fa\u6765\u4fbf\u4e8e\u5b9e\u73b0\u5171\u8bc6\u7b97\u6cd5\u63d2\u4ef6\u7684\u65f6\u5019\u8c03\u7528\u3002   newTimerImpl   // timerStart is used to deliver the start request to the eventTimer thread\ntype timerStart struct {\n    hard     bool          // Whether to reset the timer if it is running\n    event    Event         // What event to push onto the event queue\n    duration time.Duration // How long to wait before sending the event\n}\n\n// timerImpl is an implementation of Timer\ntype timerImpl struct {\n    threaded                   // Gives us the exit chan\n    timerChan  -chan time.Time // When non-nil, counts down to preparing to do the event\n    startChan chan *timerStart // Channel to deliver the timer start events to the service go routine\n    stopChan  chan struct{}    // Channel to deliver the timer stop events to the service go routine\n    manager   Manager          // The event manager to deliver the event to after timer expiration\n}  timerStart\u6307\u5b9a\u4e86\u51e0\u4e2a\u53c2\u6570\uff1atimer\u8fd8\u672a\u5230\u65f6\u95f4\u524d\u662f\u5426\u53ef\u4ee5\u91cd\u7f6e\u3001\u6d88\u606f\u961f\u5217\u3001\u8d85\u65f6\u65f6\u95f4\u3002timerImpl\u5728\u521d\u59cb\u5316\u7684\u65f6\u5019\uff0c\u542f\u52a8\u4e00\u4e2a\u534f\u7a0b\uff0c\u5faa\u73af\u68c0\u6d4bstartChan\u3001stopChan\u3001timerChan\u3001event\u3001exit\u7b49\u662f\u5426\u6d88\u606f\uff0c\u5bf9timer\u8fdb\u884c\u64cd\u4f5c\uff0c\u6bd4\u5982\u505c\u6b62\u3001\u91cd\u542f\u7b49\u3002   MessageFan   // Message encapsulates an OpenchainMessage with sender information\ntype Message struct {\n    Msg    *pb.Message\n    Sender *pb.PeerID\n}\n\n// MessageFan contains the reference to the peer's MessageHandlerCoordinator\ntype MessageFan struct {\n    ins  map[*pb.PeerID] -chan *Message\n    out  chan *Message\n    lock sync.Mutex\n}  MessageFan\u7c7b\u4f3c\u98ce\u6247\uff0c\u628a\u4e0d\u540cPeerID\u7684\u6d88\u606f\u6c47\u805a\u5230\u4e00\u4e2a\u901a\u9053\u7edf\u4e00\u8f93\u51fa\u3002", 
            "title": "\u63d2\u4ef6\u63a5\u53e3"
        }, 
        {
            "location": "/hyperledger/consensus/#noops", 
            "text": "NOOPS\u662f\u4e3a\u4e86\u6f14\u793a\u5171\u8bc6\u7b97\u6cd5\u7684\uff0c\u8981\u5b9e\u73b0\u4e00\u4e2a\u5171\u8bc6\u7b97\u6cd5\u7684\u63d2\u4ef6\uff0c\u53ef\u4ee5\u770b\u770b\u5b83\u90fd\u5b9e\u73b0\u4e86\u54ea\u4e9b\u529f\u80fd\uff1a   GetNoops\u8fd4\u56de\u4e00\u4e2a\u63d2\u4ef6\u5bf9\u8c61\nNOOPS\u548cPBFT\u90fd\u662f\u5355\u4f8b\u6a21\u5f0f\uff0c\u8f93\u5165\u53c2\u6570\u662fStack\u63a5\u53e3\uff1a   // GetNoops returns a singleton of NOOPS\nfunc GetNoops(c consensus.Stack) consensus.Consenter {\n    if iNoops != nil {\n        iNoops = newNoops(c)\n    }\n    return iNoops\n}   \u5b9e\u73b0Consenter\u63a5\u53e3\n\u5305\u62ecRecvMsg\u3001Executed\u3001Committed\u3001RolledBack\u3001StateUpdated\u7b49\u3002   NOOPS\u53ea\u5b9e\u73b0\u4e86RecvMsg\u63a5\u53e3\uff0c\u5904\u7406\u4e86Message_CHAIN_TRANSACTION\u548cMessage_CONSENSUS\u6d88\u606f\u3002\u5bf9Message_CHAIN_TRANSACTION\u6d88\u606f\u7684\u5904\u7406\u5c31\u662f\u628a\u6d88\u606f\u7c7b\u578b\u4fee\u6539\u6210Message_CONSENSUS\u518d\u5e7f\u64ad\u51fa\u53bb\uff0c\u5bf9Message_CONSENSUS\u6d88\u606f\u7684\u5904\u7406\u5c31\u662f\u4fdd\u5b58\u4e0b\u6765\u3002", 
            "title": "NOOPS"
        }, 
        {
            "location": "/hyperledger/consensus/#pbft", 
            "text": "", 
            "title": "PBFT"
        }, 
        {
            "location": "/hyperledger/consensus/#pbft_1", 
            "text": "", 
            "title": "PBFT\u534f\u8bae"
        }, 
        {
            "location": "/hyperledger/consensus/#_2", 
            "text": "\u5206\u5e03\u5f0f\u8282\u70b9\u901a\u8fc7\u7f51\u7edc\u662f\u8fde\u63a5\u5728\u4e00\u8d77\u7684  \u7f51\u7edc\u8282\u70b9\u53d1\u9001\u7684\u6d88\u606f\u53ef\u80fd\u4f1a\u4e22\uff0c\u53ef\u80fd\u4f1a\u5ef6\u8fdf\u5230\u8fbe\uff0c\u4e5f\u53ef\u80fd\u4f1a\u91cd\u590d\uff0c\u5230\u8fbe\u987a\u5e8f\u4e5f\u53ef\u80fd\u662f\u4e71\u7684", 
            "title": "\u524d\u63d0\u5047\u8bbe"
        }, 
        {
            "location": "/hyperledger/consensus/#3f1", 
            "text": "\u6700\u574f\u7684\u60c5\u51b5\u662f\uff1af\u4e2a\u8282\u70b9\u662f\u6709\u95ee\u9898\u7684\uff0c\u7531\u4e8e\u5230\u8fbe\u987a\u5e8f\u7684\u95ee\u9898\uff0c\u6709\u53ef\u80fdf\u4e2a\u6709\u95ee\u9898\u7684\u8282\u70b9\u6bd4\u6b63\u5e38\u7684f\u4e2a\u8282\u70b9\u5148\u8fd4\u56de\u6d88\u606f\uff0c\u53c8\u8981\u4fdd\u8bc1\u6536\u5230\u7684\u6b63\u5e38\u7684\u8282\u70b9\u6bd4\u6709\u95ee\u9898\u7684\u8282\u70b9\u591a\uff0c\u6240\u4ee5\u9700\u8981\u6ee1\u8db3N-f-f f =  N 3f\uff0c\u6240\u4ee5\u81f3\u5c113f+1\u4e2a\u8282\u70b9", 
            "title": "\u4e3a\u4ec0\u4e48\u81f3\u5c11\u89813f+1\u4e2a\u8282\u70b9"
        }, 
        {
            "location": "/hyperledger/consensus/#_3", 
            "text": "client\uff1a\u53d1\u51fa\u8c03\u7528\u8bf7\u6c42\u7684\u5b9e\u4f53  view\uff1a\u8fde\u7eed\u7684\u7f16\u53f7  replica\uff1a\u7f51\u7edc\u8282\u70b9  primary\uff1a\u4e3b\u8282\u70b9\uff0c\u8d1f\u8d23\u751f\u6210\u6d88\u606f\u5e8f\u5217\u53f7  backup\uff1a\u652f\u6491\u8282\u70b9  state\uff1a\u8282\u70b9\u72b6\u6001", 
            "title": "\u672f\u8bed"
        }, 
        {
            "location": "/hyperledger/consensus/#3", 
            "text": "\u4eceprimary\u6536\u5230\u6d88\u606f\u5f00\u59cb\uff0c\u6bcf\u4e2a\u6d88\u606f\u90fd\u4f1a\u6709view\u7684\u7f16\u53f7\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u68c0\u67e5\u662f\u5426\u548c\u81ea\u5df1\u7684view\u662f\u76f8\u540c\u7684\uff0c\u4ee3\u8868\u662f\u54ea\u4e2a\u8282\u70b9\u53d1\u9001\u51fa\u6765\u7684\u6d88\u606f\uff0c\u6e90\u5934\u5728\u54ea\u91cc\uff0cclient\u6536\u5230\u6d88\u606f\u4e5f\u4f1a\u68c0\u67e5\u8be5\u8bf7\u6c42\u8fd4\u56de\u7684\u6240\u6709\u6d88\u606f\u662f\u5426\u662f\u76f8\u540c\u7684view\u3002\u5982\u679c\u8fc7\u7a0b\u4e2d\u53d1\u73b0view\u4e0d\u76f8\u540c\uff0c\u6d88\u606f\u5c31\u4e0d\u4f1a\u88ab\u5904\u7406\u3002\u9664\u4e86\u68c0\u67e5view\u4e4b\u5916\uff0c\u6bcf\u4e2a\u8282\u70b9\u6536\u5230\u6d88\u606f\u7684\u65f6\u5019\u90fd\u4f1a\u68c0\u67e5\u5bf9\u5e94\u7684\u5e8f\u5217\u53f7n\u662f\u5426\u5339\u914d\uff0c\u8fd8\u4f1a\u68c0\u67e5\u76f8\u540cview\u548cn\u7684PRE-PREPARE\u3001PREPARE\u6d88\u606f\u662f\u5426\u5339\u914d\uff0c\u4ece\u534f\u8bae\u7684\u8fde\u7eed\u6027\u4e0a\u63d0\u4f9b\u4e86\u4e00\u5b9a\u7a0b\u5ea6\u7684\u5b89\u5168\u3002  \u6bcf\u4e2a\u8282\u70b9\u6536\u5230\u5176\u4ed6\u8282\u70b9\u53d1\u9001\u7684\u6d88\u606f\uff0c\u80fd\u591f\u9a8c\u8bc1\u5176\u7b7e\u540d\u786e\u8ba4\u53d1\u9001\u6765\u6e90\uff0c\u4f46\u5e76\u4e0d\u80fd\u786e\u8ba4\u53d1\u9001\u8282\u70b9\u662f\u5426\u4f2a\u9020\u4e86\u6d88\u606f\uff0cPBFT\u91c7\u7528\u7684\u529e\u6cd5\u5c31\u662f\u6570\u6570\uff0c\u770b\u6709\u591a\u5c11\u8282\u70b9\u53d1\u9001\u4e86\u76f8\u540c\u7684\u6d88\u606f\uff0c\u5728\u6709\u95ee\u9898\u7684\u8282\u70b9\u6570\u6709\u9650\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u80fd\u5224\u65ad\u54ea\u4e9b\u8282\u70b9\u53d1\u9001\u7684\u6d88\u606f\u662f\u771f\u5b9e\u7684\u3002REQUEST\u548cPRE-PREPARE\u9636\u6bb5\u8fd8\u4e0d\u6d89\u53ca\u5230\u6d88\u606f\u7684\u771f\u5b9e\u6027\uff0c\u53ea\u662f\u72ec\u7acb\u7684\u751f\u6210\u6216\u8005\u786e\u8ba4view\u548c\u5e8f\u5217\u53f7n\uff0c\u6240\u4ee5\u6536\u5230\u6d88\u606f\u5224\u65ad\u6765\u6e90\u540e\u5c31\u5e7f\u64ad\u51fa\u53bb\u4e86\u3002PREPARE\u9636\u6bb5\u5f00\u59cb\u4f1a\u6c47\u603b\u6d88\u606f\uff0c\u901a\u8fc7\u6570\u6570\u5224\u65ad\u6d88\u606f\u7684\u771f\u5b9e\u6027\u3002PREPARE\u6d88\u606f\u662f\u6536\u5230PRE-PREPARE\u6d88\u606f\u7684\u8282\u70b9\u53d1\u9001\u51fa\u6765\u7684\uff0cprimary\u6536\u5230REQUEST\u6d88\u606f\u540e\u4e0d\u4f1a\u7ed9\u81ea\u5df1\u53d1\u9001PRE-PREPARE\u6d88\u606f\uff0c\u4e5f\u4e0d\u4f1a\u53d1\u9001PRE-PREPARE\u6d88\u606f\uff0c\u6240\u4ee5\u4e00\u4e2a\u8282\u70b9\u6536\u5230\u7684\u6d88\u606f\u6570\u6ee1\u8db32f+1-1=2f\u4e2a\u5c31\u80fd\u6ee1\u8db3\u6ca1\u95ee\u9898\u7684\u8282\u70b9\u6570\u6bd4\u6709\u95ee\u9898\u8282\u70b9\u591a\u4e86\uff08\u5305\u62ec\u81ea\u8eab\u8282\u70b9\uff09\u3002COMMIT\u9636\u6bb5primary\u8282\u70b9\u4e5f\u4f1a\u5728\u6536\u5230PREPARE\u6d88\u606f\u540e\u53d1\u9001COMMIT\u6d88\u606f\uff0c\u6240\u4ee5\u6536\u5230\u7684\u6d88\u606f\u6570\u6ee1\u8db32f+1\u4e2a\u5c31\u80fd\u6ee1\u8db3\u6ca1\u95ee\u9898\u7684\u8282\u70b9\u6570\u6bd4\u6709\u95ee\u9898\u8282\u70b9\u591a\u4e86\uff08\u5305\u62ec\u81ea\u8eab\u8282\u70b9\uff09\u3002  PRE-PREPARE\u548cPREPARE\u9636\u6bb5\u4fdd\u8bc1\u4e86\u6240\u6709\u6b63\u5e38\u7684\u8282\u70b9\u5bf9\u8bf7\u6c42\u7684\u5904\u7406\u987a\u5e8f\u8fbe\u6210\u4e00\u81f4\uff0c\u5b83\u80fd\u591f\u4fdd\u8bc1\u5982\u679c  PREPARE(m, v, n, i)  \u662f\u771f\u7684\u8bdd\uff0c PREPARE(m , v, n, j)  \u5c31\u4e00\u5b9a\u662f\u5047\u7684\uff0c\u5176\u4e2dj\u662f\u4efb\u610f\u4e00\u4e2a\u6b63\u5e38\u8282\u70b9\u7684\u7f16\u53f7\uff0c\u53ea\u8981  D(m) != D(m ) \u3002\u56e0\u4e3a\u5982\u679c\u67093f+1\u4e2a\u8282\u70b9\uff0c\u81f3\u5c11\u6709f+1\u4e2a\u6b63\u5e38\u7684\u8282\u70b9\u53d1\u9001\u4e86PRE-PREPARE\u548cPREPARE\u6d88\u606f\uff0c\u6240\u4ee5\u5982\u679c PREPARE(m , v, n, j)  \u662f\u771f\u7684\u8bdd\uff0c\u8fd9\u4e9b\u8282\u70b9\u4e2d\u5c31\u81f3\u5c11\u6709\u4e00\u4e2a\u8282\u70b9\u53d1\u4e86\u4e0d\u540c\u7684PRE-PREPARE\u6216\u8005PREPARE\u6d88\u606f\uff0c\u8fd9\u548c\u5b83\u662f\u6b63\u5e38\u7684\u8282\u70b9\u4e0d\u4e00\u81f4\u3002\u5f53\u7136\uff0c\u8fd8\u6709\u4e00\u4e2a\u5047\u8bbe\u662f\u5b89\u5168\u5f3a\u5ea6\u662f\u8db3\u591f\u7684\uff0c\u80fd\u591f\u4fdd\u8bc1 m != m \u65f6\uff0c D(m) != D(m ) \uff0c D(m)  \u662f\u6d88\u606f m \u7684\u6458\u8981\u3002  \u786e\u5b9a\u597d\u4e86\u6bcf\u4e2a\u8bf7\u6c42\u7684\u5904\u7406\u987a\u5e8f\uff0c\u600e\u4e48\u80fd\u4fdd\u8bc1\u6309\u7167\u987a\u5e8f\u6267\u884c\u5462\uff1f\u7f51\u7edc\u6d88\u606f\u90fd\u662f\u65e0\u5e8f\u5230\u8fbe\u7684\uff0c\u6bcf\u4e2a\u8282\u70b9\u8fbe\u6210\u4e00\u81f4\u7684\u987a\u5e8f\u4e5f\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6709\u53ef\u80fd\u5728\u67d0\u4e2a\u8282\u70b9\u4e0an\u6bd4n-1\u5148\u8fbe\u6210\u4e00\u81f4\u3002\u5176\u5b9e\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u628aPRE-PREPARE\u3001PREPARE\u548cCOMMIT\u6d88\u606f\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u4eec\u90fd\u4f1a\u6709\u4e00\u4e2a\u72b6\u6001\u6765\u6807\u8bc6\u73b0\u5728\u5904\u7406\u7684\u60c5\u51b5\uff0c\u7136\u540e\u518d\u6309\u987a\u5e8f\u5904\u7406\u3002\u800c\u4e14\u5e8f\u5217\u53f7n\u5728\u4e0d\u540cview\u4e2d\u4e5f\u662f\u8fde\u7eed\u7684\uff0c\u6240\u4ee5n-1\u5904\u7406\u5b8c\u4e86\uff0c\u5904\u7406n\u5c31\u597d\u4e86\u3002", 
            "title": "3\u9636\u6bb5\u534f\u8bae"
        }, 
        {
            "location": "/hyperledger/consensus/#view-change", 
            "text": "\u4e0a\u56fe\u662f\u53d1\u751fVIEW-CHANGE\u7684\u4e00\u79cd\u60c5\u51b5\uff0c\u5c31\u662f\u8282\u70b9\u6b63\u5e38\u6536\u5230PRE-PREPARE\u6d88\u606f\u4ee5\u540e\u90fd\u4f1a\u542f\u52a8\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u5982\u679c\u5728\u8bbe\u7f6e\u7684\u65f6\u95f4\u5185\u90fd\u6ca1\u6709\u6536\u5230\u56de\u590d\uff0c\u5c31\u4f1a\u89e6\u53d1VIEW-CHANGE\uff0c\u8be5\u8282\u70b9\u5c31\u4e0d\u4f1a\u518d\u63a5\u6536\u9664CHECKPOINT\n\u3001VIEW-CHANGE\u548cNEW-VIEW\u7b49\u6d88\u606f\u5916\u7684\u5176\u4ed6\u6d88\u606f\u4e86\u3002NEW-VIEW\u662f\u7531\u65b0\u4e00\u8f6e\u7684primary\u8282\u70b9\u53d1\u9001\u7684\uff0c O \u662f\u4e0d\u5305\u542b\u634e\u5e26\u7684REQUEST\u7684PRE-PREPARE\u6d88\u606f\u96c6\u5408\uff0c\u8ba1\u7b97\u65b9\u6cd5\u5982\u4e0b\uff1a  primary\u8282\u70b9\u786e\u5b9a V \u4e2d\u6700\u65b0\u7684\u7a33\u5b9a\u68c0\u67e5\u70b9\u5e8f\u5217\u53f7 min-s \u548cPRE-PREPARE\u6d88\u606f\u4e2d\u6700\u5927\u7684\u5e8f\u5217\u53f7 max-s   \u5bf9 min-s \u548c max-s \u4e4b\u95f4\u6bcf\u4e2a\u5e8f\u5217\u53f7n\u90fd\u751f\u6210\u4e00\u4e2aPRE-PREPARE\u6d88\u606f\u3002\u8fd9\u53ef\u80fd\u6709\u4e24\u79cd\u60c5\u51b5\uff1a\n  -  P \u7684VIEW-CHANGE\u6d88\u606f\u4e2d\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u96c6\u5408\uff0c\u5e8f\u5217\u53f7\u662fn\n  - \u4e0d\u5b58\u5728\u4e0a\u9762\u7684\u96c6\u5408  \u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u4f1a\u751f\u6210\u65b0\u7684PRE-PREPARE\u6d88\u606f \ud835\udf82 p \uff0c\u5176\u4e2d n \u662f V \u4e2d\u6700\u5927\u7684 v \u5e8f\u5217\u53f7\uff0c d \u662f\u5bf9\u5e94\u7684PRE-PREPARE\u6d88\u606f\u6458\u8981\u3002\u7b2c\u4e8c\u60c5\u51b5\uff0cPRE-PREPARE\u6d88\u606f\u7684 d \u662f\u7279\u6b8a\u7684\u7a7a\u6d88\u606f\u6458\u8981\u3002  primary\u8282\u70b9\u53d1\u9001\u5b8cNEW-VIEW\u6d88\u606f\u5e76\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d\u5c31\u5207\u6362\u5230 v +1\u7684view\u4e2d\uff0c\u5f00\u59cb\u63a5\u6536\u6240\u6709\u7684\u6d88\u606f\u4e86\u3002\u5176\u4ed6\u8282\u70b9\u4e5f\u5728\u6536\u5230NEW-VIEW\u6d88\u606f\u540e\u9700\u8981\u9a8c\u8bc1\u7b7e\u540d\u662f\u5426\u6b63\u786e\uff0c\u8fd8\u8981\u9a8c\u8bc1 O \u6d88\u606f\u7684\u6b63\u786e\u6027\uff0c\u90fd\u6ca1\u95ee\u9898\u5c31\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d\uff0c\u5e7f\u64ad\u5b8c O \u4e2d\u7684PRE-PREPARE\u6d88\u606f\u540e\u5c31\u5207\u6362\u5230 v +1\u7684view\u4e2d\uff0cVIEW-CHANGE\u5c31\u7b97\u5b8c\u6210\u4e86\u3002", 
            "title": "VIEW-CHANGE"
        }, 
        {
            "location": "/hyperledger/consensus/#_4", 
            "text": "\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u628a\u6bcf\u6761\u6d88\u606f\u4fdd\u5b58\u4e0b\u6765\uff0c\u9664\u975e\u5b83\u786e\u8ba4\u8fd9\u4e2a\u8bf7\u6c42\u81f3\u5c11\u88ab f +1\u4e2a\u6b63\u5e38\u8282\u70b9\u5904\u7406\u8fc7\uff0c\u800c\u4e14\u8fd8\u8981\u80fd\u5728VIEW-CHANGE\u4e2d\u8bc1\u660e\u8fd9\u4e00\u70b9\u3002\u53e6\u5916\uff0c\u5982\u679c\u4e00\u4e9b\u8282\u70b9\u9519\u8fc7\u4e86\u5176\u4ed6\u7684\u6b63\u5e38\u8282\u70b9\u90fd\u4e22\u6389\u7684\u6d88\u606f\uff0c\u5b83\u9700\u8981\u4f20\u8f93\u90e8\u5206\u6216\u8005\u5168\u90e8\u7684\u670d\u52a1\u72b6\u6001\u6765\u4fdd\u5b58\u540c\u6b65\u3002\u6240\u4ee5\u8282\u70b9\u9700\u8981\u8bc1\u660e\u81ea\u5df1\u7684\u72b6\u6001\u662f\u6b63\u786e\u7684\u3002  \u5982\u679c\u6bcf\u4e2a\u64cd\u4f5c\u5b8c\u6210\u90fd\u6536\u96c6\u8bc1\u636e\u8bc1\u660e\u81ea\u5df1\u7684\u72b6\u6001\u6ca1\u6709\u95ee\u9898\u6210\u672c\u5c31\u592a\u9ad8\u4e86\u3002\u5b9e\u9645\u7684\u505a\u6cd5\u53ef\u4ee5\u662f\u5468\u671f\u6027\u7684\uff0c\u6bd4\u5982\u8bf7\u6c42\u7684\u5e8f\u53f7\u662f100\u7684\u500d\u6570\u65f6\u3002\u8fd9\u79cd\u8bf7\u6c42\u6267\u884c\u5b8c\u7684\u72b6\u6001\u5c31\u53eb\u4e00\u4e2a\u68c0\u67e5\u70b9\uff0c\u9a8c\u8bc1\u8fc7\u7684\u68c0\u67e5\u70b9\u53eb\u7a33\u5b9a\u68c0\u67e5\u70b9\u3002\u6bcf\u4e2a\u8282\u70b9\u7ef4\u62a4\u4e86\u591a\u4e2a\u72b6\u6001\uff0c\u6700\u65b0\u7684\u7a33\u5b9a\u68c0\u67e5\u70b9\u3001\u591a\u4e2a\u4e0d\u7a33\u5b9a\u7684\u68c0\u67e5\u70b9\u548c\u5f53\u524d\u72b6\u6001\u3002  \u9a8c\u8bc1\u4e00\u4e2a\u68c0\u67e5\u70b9\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a  \u8282\u70b9 i \u751f\u6210\u4e00\u4e2a\u68c0\u67e5\u70b9\uff0c\u5e7f\u64ad \ud835\udf82 i \u7ed9\u5176\u4ed6\u7684\u8282\u70b9  \u6bcf\u4e2a\u8282\u70b9\u90fd\u68c0\u67e5\u81ea\u5df1\u7684\u65e5\u5fd7\uff0c\u5982\u679c\u67092 f +1\u4e2a\u5e8f\u5217\u53f7\u4e3a n \uff0c\u6d88\u606f\u6458\u8981 d \u76f8\u540c\u7684\u4e0d\u540c\u8282\u70b9\u53d1\u9001\u8fc7\u6765\u7684CHECKPOINT\u6d88\u606f\uff0c\u5c31\u662f\u7a33\u5b9a\u68c0\u67e5\u70b9\u7684\u8bc1\u636e  \u786e\u8ba4\u4e86\u6700\u65b0\u7684\u7a33\u5b9a\u68c0\u67e5\u70b9\uff0c\u5c31\u53ef\u4ee5\u628a\u4e4b\u524d\u7684\u68c0\u67e5\u70b9\u548c\u68c0\u67e5\u70b9\u6d88\u606f\u90fd\u5220\u6389\u4e86\uff0c\u8fd8\u53ef\u4ee5\u5220\u6389\u5e8f\u5217\u53f7\u5c0f\u4e8e n \u7684\u6240\u6709PRE-PREPARE\u3001PREPARE\u3001COMMIT\u6d88\u606f\uff0c\u51cf\u5c11\u5360\u7528\u7684\u7a7a\u95f4\u3002", 
            "title": "\u5783\u573e\u56de\u6536"
        }, 
        {
            "location": "/hyperledger/consensus/#_5", 
            "text": "PBFT\u534f\u8bae\u91cc\u63d0\u4e86\u51e0\u79cd\u4f18\u5316\u63aa\u65bd\uff1a   \u51cf\u5c11\u901a\u4fe1  \u5c3d\u91cf\u907f\u514d\u53d1\u9001\u5927\u91cf\u7684\u56de\u590d\u6d88\u606f\uff0cclient\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u8282\u70b9\u6765\u53d1\u9001\u56de\u590d\u6d88\u606f\uff0c\u5176\u4ed6\u8282\u70b9\u5c31\u53ea\u9700\u8981\u56de\u590d\u6d88\u606f\u7684\u6458\u8981\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u80fd\u5728\u51cf\u5c11\u5e26\u5bbd\u548cCPU\u5f00\u9500\u7684\u60c5\u51b5\u4e0b\u9a8c\u8bc1\u7ed3\u679c\u7684\u6b63\u786e\u6027  \u8c03\u7528\u64cd\u4f5c\u6b65\u9aa4\u4ece5\u6b65\u51cf\u5c11\u52304\u6b65\u3002\u6b63\u5e38\u7684\u8c03\u7528\u9700\u8981\u7ecf\u8fc7REQUEST\u3001PRE-PREPARE\u3001PREPARE\u3001COMMIT\u3001REPLY\u7b495\u6b65\uff0c\u8282\u70b9\u53ef\u4ee5\u5728PREPARE\u540e\u5c31\u5904\u7406\u6d88\u606f\uff0c\u7136\u540e\u628a\u6267\u884c\u7ed3\u679c\u53d1\u9001\u7ed9client\uff0c\u5982\u679c\u67092 f +1\u4e2a\u76f8\u540c\u7ed3\u679c\u7684\u6d88\u606f\uff0c\u8bf7\u6c42\u5c31\u7ed3\u675f\u4e86\uff0c\u5426\u5219\u8fd8\u662f\u6b63\u5e38\u76845\u6b65\uff0c\u51fa\u73b0\u5f02\u5e38\u7684\u8bdd\u5c31\u56de\u9000\u72b6\u6001   \u63d0\u5347\u53ea\u8bfb\u64cd\u4f5c\u7684\u6548\u7387\u3002\u8282\u70b9\u53ea\u8981\u80fd\u786e\u8ba4\u64cd\u4f5c\u662f\u6b63\u786e\u800c\u4e14\u662f\u53ea\u8bfb\u7684\uff0c\u5c31\u53ef\u4ee5\u7acb\u5373\u6267\u884c\uff0c\u7b49\u5f85\u72b6\u6001\u63d0\u4ea4\u4ee5\u540e\u5c31\u56de\u590d\u7ed9client    \u8282\u70b9\u91c7\u7528\u7b7e\u540d\u6765\u9a8c\u8bc1\u6d88\u606f\uff0c\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\u53ef\u4ee5\u8fd9\u4e48\u7528\uff1a   \u516c\u94a5\u7b7e\u540d\uff1a\u4e3b\u8981\u662fVIEW_CHANGE\u3001NEW_VIEW\u6d88\u606f\u7684\u65f6\u5019\u7528  MAC\uff1a\u5176\u4ed6\u5730\u65b9\u7684\u6d88\u606f\u4f20\u8f93\u90fd\u662f\u8fd9\u79cd\u65b9\u6cd5\uff0c\u8fd9\u6837\u80fd\u51cf\u5c11\u6027\u80fd\u74f6\u9888\u3002MAC\u6d88\u606f\u672c\u6765\u662f\u4e0d\u80fd\u9a8c\u8bc1\u6d88\u606f\u7684\u771f\u5b9e\u6027\uff0c\u4f46\u662f\u8bba\u6587\u4f5c\u8005\u63d0\u4f9b\u4e86\u4e00\u4e2a\u529e\u6cd5\u6765\u7ed5\u8fc7\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u4f1a\u7528\u4e00\u4e9b\u89c4\u5219\uff0c\u6bd4\u5982\u4e24\u4e2a\u6b63\u5e38\u8282\u70b9\u76f8\u540c\u7684v\u548cn\uff0c\u8bf7\u6c42\u4e5f\u662f\u4e00\u6837\u7684\u3002", 
            "title": "\u4e00\u4e9b\u4f18\u5316\u63aa\u65bd"
        }, 
        {
            "location": "/hyperledger/consensus/#_6", 
            "text": "\u534f\u8bae\u91cc\u9762\u53ea\u4ecb\u7ecd\u4e86\u4e3b\u8981\u7684\u6d41\u7a0b\uff0c\u5f88\u591a\u5b9e\u73b0\u7684\u90e8\u5206\u5e76\u6ca1\u6709\u8bf4\u660e\uff0c\u6bd4\u5982\u6bcf\u4e2a\u8282\u70b9\u6536\u5230VIEW-CHANGE\u540e\u600e\u4e48\u5904\u7406\uff0cMAC\u534f\u8bae\u7684\u5171\u4eab\u5bc6\u94a5\u600e\u4e48\u5206\u914d\uff0c\u5982\u679c\u5e94\u5bf9DDos\u653b\u51fb\u7b49\u7b49\u3002", 
            "title": "\u5176\u4ed6"
        }, 
        {
            "location": "/hyperledger/consensus/#pbft_2", 
            "text": "", 
            "title": "PBFT\u5b9e\u73b0"
        }, 
        {
            "location": "/hyperledger/blockchain/", 
            "text": "", 
            "title": "\u533a\u5757\u94fe"
        }, 
        {
            "location": "/hyperledger/chaincode/", 
            "text": "", 
            "title": "\u94fe\u7801"
        }, 
        {
            "location": "/hyperledger/transaction/", 
            "text": "", 
            "title": "\u4ea4\u6613"
        }, 
        {
            "location": "/hyperledger/events/", 
            "text": "", 
            "title": "\u4e8b\u4ef6\u6d41"
        }, 
        {
            "location": "/hyperledger/contributor/", 
            "text": "", 
            "title": "\u4ee3\u7801\u8d21\u732e"
        }, 
        {
            "location": "/installation/", 
            "text": "\u5b89\u88c5\u90e8\u7f72\n\n\nFabric\u7684\u8fd0\u884c\u73af\u5883\u662f\uff1aHost-\nVM-\nDocker\uff0c\u6240\u4ee5\u53ef\u4ee5\u6709\u5982\u4e0b\u51e0\u79cd\u4e0d\u540c\u7684\u5b89\u88c5\u65b9\u5f0f\uff1a\n\n\nVagrant\u5b89\u88c5\n\n\n\u8fd9\u79cd\u65b9\u5f0f\u4e3b\u8981\u662f\u7528\u4e8e\u642d\u5efa\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\uff0c\u80fd\u591f\u5728Windows/Mac/Linux\u7b49\u4e0d\u540c\u7684\u73af\u5883\u4e0b\u914d\u7f6e\u51fa\u76f8\u540c\u7684\u73af\u5883\u6765\u3002\n\n\n\u51c6\u5907\u5de5\u4f5c\n\n\n\n\n\u914d\u7f6e\u73af\u5883\u53d8\u91cf \n\n\n\n\n\u8bf7\u81ea\u884c\u66ff\u6362\u4e0b\u9762GOPATH\u7684\u8bbe\u7f6e\uff1a\n\n\nclaritys-MBP:~ clarity$ cat ~/.profile\nexport GOROOT=/usr/local/go\nexport GOPATH=/Users/clarity/Projects\nexport PATH=$PATH:/usr/local/sbin\n\n\n\n\n\n\n\u5b89\u88c5Git\u5e76\u4e0b\u8f7d\u6e90\u7801\n\n\n\n\nmkdir -p $GOPATH/src/github.com/hyperledger\ncd $GOPATH/src/github.com/hyperledger\ngit clone http://gerrit.hyperledger.org/r/fabric\n\n\n\n\n\n\n\u4e0b\u8f7d\u5e76\u5b89\u88c5Vagrant\u548cVirtualBox\n\n\n\n\n\u6ce8\u610f\uff1aVirtualbox\u4e0d\u80fd\u4e0b\u8f7d5.1.X\u7684\u7248\u672c\uff0c\u5426\u5219\u4f1a\u548cVagrant 1.8.4\u51b2\u7a81\uff0c\u51fa\u73b0\u9519\u8bef\uff1a\n\n\nNo usable default provider could be found for your system.\n\n\n\n\n\u8fd0\u884cVagrant\n\n\n\u4fee\u6539ubuntu\u6e90\uff1a$GOPATH/src/github.com/hyperledger/fabric/scripts/provision/common.sh\uff0c\u5728apt-get update\u524d\u589e\u52a0\u4e00\u884c\uff1a\n\n\nsed -i \ns/us.archive.ubuntu.com/cn.archive.ubuntu.com/g\n /etc/apt/sources.list\n\n\n\n\ncd $GOPATH/src/github.com/hyperledger/fabric/devenv\nvagrant up\n\n\n\n\n\u8fd0\u884c\u524d\u8bf7\u914d\u7f6e\u597d\u7ffb\u5899\u7684\u7f51\u7edc\u73af\u5883\uff0c\u5426\u5219\u67d0\u4e9b\u6b65\u9aa4\u53ef\u80fd\u5c31\u5361\u6b7b\u4e86\u3002\u6839\u636e\u7f51\u7edc\u72b6\u51b5\u4e0d\u540c\uff0c\u4e0a\u9762\u7684\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u5f88\u6162\uff0c1-5\u4e2a\u5c0f\u65f6\u4e0d\u7b49\u3002\n\n\nProxifier\u9700\u8981\u8bbe\u7f6e\u4ee3\u7406\u7684\u57df\u540d\uff1a\n\n\n*.googlesource.com;*.amazonaws.com;security.ubuntu.com;\n\n\n\n\nProxifier\u4e0d\u9700\u8981DNS\u89e3\u6790\u7684\u57df\u540d\uff1a\n\n\n*.archive.ubuntu.com;*.gradle.org;*.launchpad.net;github-cloud.s3.amazonaws.com;security.ubuntu.com;\n\n\n\n\n\u5982\u679c\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a\n\n\nSSL read: error:00000000:lib(0):func(0):reason(0), errno 60\n\n\n\n\n\u53ef\u4ee5\u624b\u52a8\u4e0b\u8f7d\u89e3\u51b3\uff1a\n\n\nvagrant box add hyperledger/fabric-baseimage -c\n\n\n\n\n\u5982\u679c\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a\n\n\nW: Failed to fetch http://security.ubuntu.com/ubuntu/dists/trusty-security/restricted/source/Sources  Hash Sum mismatch\n\n\n\n\n\u4ea7\u751f\u7684\u539f\u56e0\u662f\u7f51\u7edc\u4e2d\u6709\u7f13\u5b58\uff0c\u6e90\u7684\u66f4\u65b0\u901f\u5ea6\u4e0d\u5339\u914d\u5bfc\u81f4\u7684\uff0c\u6240\u4ee5\u53ef\u80fd\u6362\u4e00\u4e2a\u7f51\u7edc\u73af\u5883\u5c31\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\u6211\u662f\u624b\u52a8\u8bbe\u7f6eProxifier\u7684\u89c4\u5219\uff0c\u8ba9security.ubuntu.com\u8d70\u4ee3\u7406\u7ed5\u8fc7\u53bb\u7684\u3002\u53e6\u5916\uff0c\u9ed8\u8ba4\u7684\u6e90\u662fus.archive.ubuntu.com\uff0c\u53ef\u4ee5\u5148vagrant ssh\u8fdb\u5165\u7cfb\u7edf\uff0c\u624b\u52a8\u8bbe\u7f6e\u6e90\u4e3acn.archive.ubuntu.com\u6216\u8005mirrors.163.com\uff0c\u901f\u5ea6\u4f1a\u5feb\u4e00\u70b9\u3002\n\n\n\u5982\u679c\u9700\u8981\u5982\u4e0b\u9519\u8bef\uff1a\n\n\nCould not get lock /var/lib/apt/lists/lock - open (11: Resource temporarily unavailable)\n\n\n\n\n\u8bf4\u660e\u662f\u4e4b\u524d\u5f02\u5e38\u9000\u51fa\uff0c\u540e\u53f0\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\u51b2\u7a81\u5bfc\u81f4\u7684\uff0cvagrant ssh\u8fdb\u53bb\u5e72\u6389apt\u8fdb\u7a0b\uff0c\u518dvagrant up\u5c31\u53ef\u4ee5\u4e86\u3002\n\n\n\u8fdb\u5165Vagrant VM\n\n\nvagrant ssh\n\n\n\n\n\u5b89\u88c5docker-compose\n\n\n\u4fdd\u5b58\u5982\u4e0b\u5185\u5bb9\u5230install_dockercompose.sh\uff1a\n\n\n#!/bin/sh\n\n# docker-compose\ncurl -L https://github.com/docker/compose/releases/download/1.7.1/docker-compose-`uname -s`-`uname -m` \n /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\n\n# write docker command\n## display docker process\ncat \n /bin/dp \nEND\n#!/bin/sh\n\n# display docker process\ndocker ps -a\nEND\nchmod +x /bin/dp\n\n## rm container with Docker Container ID/Names\ncat \n /bin/dr \nEND\n#!/bin/sh\n\n## container with Docker Container ID/Names\nif [ \\$# -lt 1 ]; then\n    echo \n\\$0 id/name\n\n    echo \nrm container with Docker Container ID/Names\n\n    exit 1\nfi\nid=\\$1\ncontainerid=\\$(docker ps -a|awk '{if ((\\$1~/'\n\\$id\n'/ || \\$NF~/'\n\\$id\n'/) \n NR \n1) {print \\$1,\\$NF;}}')\necho \nstop/rm containerid:\n \\$containerid\ndocker stop \\$containerid\ndocker rm \\$containerid\nEND\nchmod +x /bin/dr\n\n## docker images\ncat \n /bin/dm \nEND\n#!/bin/sh\n\ndocker images\nEND\nchmod +x /bin/dm\n\n## docker rm images\ncat \n /bin/dri \nEND\n#!/bin/sh\n\n## container with Docker Image ID/Names\nif [ \\$# -lt 1 ]; then\n    image_id=\\$(docker images |awk '{if (\\$1~/\nnone\n/) {print \\$3;}}')\n    docker rmi -f \\$image_id\n    exit 0\nfi\nid=\\$1\nimage_id=\\$(docker images |awk '{if (\\$1~/\nnone\n/ || \\$1~/'\n$id\n'/ || \\$3~/'\n\\$id\n'/) {print \\$3;}}')\ndocker rmi -f \\$image_id\nEND\nchmod +x /bin/dri\n\n## docker exec\ncat \n /bin/de \nEND\n#!/bin/sh\n\nif [ \\$# -lt 1 ] ; then\n    echo \nusage: de docker_id\n\n    exit 0\nfi\n# exec into\ndocker exec -it \\$1 /bin/bash\nEND\nchmod +x /bin/de\n\n## docker logs\ncat \n /bin/dl \nEND\n#!/bin/sh\n\nif [ \\$# -lt 1 ] ; then\n    echo \nusage: dl docker_id\n\n    exit 0\nfi\n# logs\ndocker logs -f \\$1\nEND\nchmod +x /bin/dl\n\n\n\n\n\u7136\u540e\u8fd0\u884c\u811a\u672c\uff1a\n\n\nchmod +x install_dockercompose.sh\n./install_dockercompose.sh\n\n\n\n\n\u8fd0\u884c\u5355\u8282\u70b9\u7f51\u7edc\n\n\n\u7f16\u8f91\u4e00\u4e2adocker-compose.yml\u6587\u4ef6\uff1a\n\n\n# membersrvc\nmembersrvc:\n  image: hyperledger/fabric-membersrvc\n  ports:\n    - \n50051:50051\n\n  command: membersrvc\n\n# validating peers\n# running with the CA\nvp0:\n  image: hyperledger/fabric-peer\n  ports:\n    - \n5000:5000\n\n    - \n30303:30303\n\n    - \n30304:30304\n\n  environment:\n    - CORE_PEER_ADDRESSAUTODETECT=true\n    - CORE_VM_ENDPOINT=unix:///var/run/docker.sock\n    - CORE_LOGGING_LEVEL=DEBUG\n    - CORE_PEER_ID=vp0\n    - CORE_SECURITY_ENROLLID=test_vp0\n    - CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT\n  links:\n    - membersrvc\n  command: sh -c \nsleep 5; peer node start --peer-chaincodedev\n\n\n\n\n\n\u7136\u540e\u8fd0\u884cdocker-compose up\u5c31\u8d77\u6765\u4e86\uff0c\u53ef\u4ee5\u901a\u8fc7peer\u547d\u4ee4\u6267\u884cchaincode\u7684deploy/invoke\u7b49\u64cd\u4f5c\u3002\n\n\n\u955c\u50cf\u542f\u52a8\u8fd0\u884c\n\n\nVagrant\u542f\u52a8VM\u7684\u65b9\u5f0f\u81ea\u52a8\u4f1a\u5b89\u88c5Docker\u548c\u7f16\u8bd1Docker\u955c\u50cf\u6587\u4ef6\uff0c\u7136\u540e\u518d\u8fd0\u884cFabric\u3002\u5982\u679c\u6709Docker\u7684\u8fd0\u884c\u73af\u5883\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u540cdocker-compose\u4e00\u6837\u542f\u52a8\u670d\u52a1\u4e86\u3002\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\uff1a\n\n\n\u5b89\u88c5Docker\n\n\n\u5404\u79cd\u73af\u5883\u7684\u5b89\u88c5\u53c2\u8003\uff1a\nDocker\u5b89\u88c5\n\uff0c[\u5b89\u88c5docker-compose]\u3002\n\n\n\u4e0b\u8f7dDocker\u955c\u50cf\n\n\ndocker pull hyperledger/fabric-membersrvc\ndocker pull hyperledger/fabric-peer\n\n\n\n\n\u542f\u52a8Fabric\u670d\u52a1\n\n\n\u53c2\u8003\uff1a[\u8fd0\u884c\u5355\u8282\u70b9\u7f51\u7edc]\u3002\n\n\n\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5\n\n\n\u6e90\u7801\u7684\u5b89\u88c5\u4ee5Ubuntu/Deian\u64cd\u4f5c\u7cfb\u7edf\u4e3a\u4f8b\u3002\n\n\n\u51c6\u5907\u5de5\u4f5c\n\n\n\n\n\u5b89\u88c5Go\n\n\n\n\nGo\u5b89\u88c5\u5305\u4e0b\u8f7d\n\uff0c\u8fd9\u4e2a\u5e94\u8be5\u4e5f\u662f\u8981\u7ffb\u5899\u4e0b\u7684\u3002\n\n\n\n\n\u5b89\u88c5Docker\n\n\n\n\n\u5404\u79cd\u73af\u5883\u7684\u5b89\u88c5\u53c2\u8003\uff1a\nDocker\u5b89\u88c5\n\uff0c[\u5b89\u88c5docker-compose]\u3002\n\n\n\u5982\u679c\u8981\u975eroot\u73af\u5883\u6267\u884cdocker\u547d\u4ee4\uff0c\u53ef\u4ee5\u628a\u7528\u6237xxx\u6dfb\u52a0\u5230docker\u7ec4\uff1a\n\n\nusermod -a -G docker xxx\n\n\n\n\n\n\n\u914d\u7f6e\u73af\u5883\u53d8\u91cf\n\n\n\n\n\u8bf7\u81ea\u884c\u66ff\u6362\u4e0b\u9762GOPATH\u7684\u8bbe\u7f6e\uff1a\n\n\nclaritys-MBP:~ clarity$ cat ~/.profile\nexport GOROOT=/usr/local/go\nexport GOPATH=/Users/clarity/Projects\nexport PATH=$PATH:/usr/local/sbin\n\n\n\n\n\n\n\u5b89\u88c5Git\u5e76\u4e0b\u8f7d\u6e90\u7801\n\n\n\n\nmkdir -p $GOPATH/src/github.com/hyperledger\ncd $GOPATH/src/github.com/hyperledger\ngit clone https://github.com/hyperledger/fabric.git\n\n\n\n\n\n\n\u5b89\u88c5RocksDB\n\n\n\n\napt-get install -y libsnappy-dev zlib1g-dev libbz2-dev\ncd /tmp\ngit clone https://github.com/facebook/rocksdb.git\ncd rocksdb\ngit checkout v4.1\nPORTABLE=1 make shared_lib\nINSTALL_PATH=/usr/local make install-shared\n\n\n\n\n\n\n\u5b89\u88c5pip\n\n\n\n\napt-get install -y python-pip\npip install --upgrade pip\npip install behave nose docker-compose\npip install -I flask#####0.10.1 python-dateutil#####2.2 pytz#####2014.3 pyyaml#####3.10 couchdb#####1.0 flask-cors#####2.0.1 requests#####2.4.3\n\n\n\n\n\n\n\u9519\u8bef\uff1aRelease: The following signatures couldn\nt be verified because the public key is not available: \n NO_PUBKEY 2EA8F35793D8809A\n\n\n\n\napt-key adv --keyserver keyserver.ubuntu.com --recv-keys 2EA8F35793D8809\n\n\n\n\n\n\n\u9519\u8bef\uff1apeer: error while loading shared libraries: librocksdb.so.4.1: cannot open shared object file: No such file or directory\n\n\n\n\ncp /usr/local/lib/librocksdb.so.4.1* /usr/lib/\n\n\n\n\n\u4e5f\u53ef\u4ee5\u628a/usr/local/lib\u76ee\u5f55\u589e\u52a0\u5230/etc/ld.so.conf\u76ee\u5f55\u4e0b\u3002\u6216\u8005\u7f16\u8bd1\u7684\u65f6\u5019\u6539\u6210\uff1aINSTALL_PATH=/usr make install-shared\n\n\n\u7f16\u8bd1Docker\u955c\u50cf\n\n\ncd $GOPATH/src/github.com/hyperledger/fabric\nmake membersrvc-image\nmake peer-image\n\n\n\n\n\u8fd0\u884cFabric\u670d\u52a1\n\n\n\u53c2\u8003\uff1a[\u8fd0\u884c\u5355\u8282\u70b9\u7f51\u7edc]\u3002", 
            "title": "\u5b89\u88c5\u90e8\u7f72"
        }, 
        {
            "location": "/installation/#_1", 
            "text": "Fabric\u7684\u8fd0\u884c\u73af\u5883\u662f\uff1aHost- VM- Docker\uff0c\u6240\u4ee5\u53ef\u4ee5\u6709\u5982\u4e0b\u51e0\u79cd\u4e0d\u540c\u7684\u5b89\u88c5\u65b9\u5f0f\uff1a", 
            "title": "\u5b89\u88c5\u90e8\u7f72"
        }, 
        {
            "location": "/installation/#vagrant", 
            "text": "\u8fd9\u79cd\u65b9\u5f0f\u4e3b\u8981\u662f\u7528\u4e8e\u642d\u5efa\u5f00\u53d1\u6d4b\u8bd5\u73af\u5883\uff0c\u80fd\u591f\u5728Windows/Mac/Linux\u7b49\u4e0d\u540c\u7684\u73af\u5883\u4e0b\u914d\u7f6e\u51fa\u76f8\u540c\u7684\u73af\u5883\u6765\u3002", 
            "title": "Vagrant\u5b89\u88c5"
        }, 
        {
            "location": "/installation/#_2", 
            "text": "\u914d\u7f6e\u73af\u5883\u53d8\u91cf    \u8bf7\u81ea\u884c\u66ff\u6362\u4e0b\u9762GOPATH\u7684\u8bbe\u7f6e\uff1a  claritys-MBP:~ clarity$ cat ~/.profile\nexport GOROOT=/usr/local/go\nexport GOPATH=/Users/clarity/Projects\nexport PATH=$PATH:/usr/local/sbin   \u5b89\u88c5Git\u5e76\u4e0b\u8f7d\u6e90\u7801   mkdir -p $GOPATH/src/github.com/hyperledger\ncd $GOPATH/src/github.com/hyperledger\ngit clone http://gerrit.hyperledger.org/r/fabric   \u4e0b\u8f7d\u5e76\u5b89\u88c5Vagrant\u548cVirtualBox   \u6ce8\u610f\uff1aVirtualbox\u4e0d\u80fd\u4e0b\u8f7d5.1.X\u7684\u7248\u672c\uff0c\u5426\u5219\u4f1a\u548cVagrant 1.8.4\u51b2\u7a81\uff0c\u51fa\u73b0\u9519\u8bef\uff1a  No usable default provider could be found for your system.", 
            "title": "\u51c6\u5907\u5de5\u4f5c"
        }, 
        {
            "location": "/installation/#vagrant_1", 
            "text": "\u4fee\u6539ubuntu\u6e90\uff1a$GOPATH/src/github.com/hyperledger/fabric/scripts/provision/common.sh\uff0c\u5728apt-get update\u524d\u589e\u52a0\u4e00\u884c\uff1a  sed -i  s/us.archive.ubuntu.com/cn.archive.ubuntu.com/g  /etc/apt/sources.list  cd $GOPATH/src/github.com/hyperledger/fabric/devenv\nvagrant up  \u8fd0\u884c\u524d\u8bf7\u914d\u7f6e\u597d\u7ffb\u5899\u7684\u7f51\u7edc\u73af\u5883\uff0c\u5426\u5219\u67d0\u4e9b\u6b65\u9aa4\u53ef\u80fd\u5c31\u5361\u6b7b\u4e86\u3002\u6839\u636e\u7f51\u7edc\u72b6\u51b5\u4e0d\u540c\uff0c\u4e0a\u9762\u7684\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u5f88\u6162\uff0c1-5\u4e2a\u5c0f\u65f6\u4e0d\u7b49\u3002  Proxifier\u9700\u8981\u8bbe\u7f6e\u4ee3\u7406\u7684\u57df\u540d\uff1a  *.googlesource.com;*.amazonaws.com;security.ubuntu.com;  Proxifier\u4e0d\u9700\u8981DNS\u89e3\u6790\u7684\u57df\u540d\uff1a  *.archive.ubuntu.com;*.gradle.org;*.launchpad.net;github-cloud.s3.amazonaws.com;security.ubuntu.com;  \u5982\u679c\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a  SSL read: error:00000000:lib(0):func(0):reason(0), errno 60  \u53ef\u4ee5\u624b\u52a8\u4e0b\u8f7d\u89e3\u51b3\uff1a  vagrant box add hyperledger/fabric-baseimage -c  \u5982\u679c\u9047\u5230\u5982\u4e0b\u9519\u8bef\uff1a  W: Failed to fetch http://security.ubuntu.com/ubuntu/dists/trusty-security/restricted/source/Sources  Hash Sum mismatch  \u4ea7\u751f\u7684\u539f\u56e0\u662f\u7f51\u7edc\u4e2d\u6709\u7f13\u5b58\uff0c\u6e90\u7684\u66f4\u65b0\u901f\u5ea6\u4e0d\u5339\u914d\u5bfc\u81f4\u7684\uff0c\u6240\u4ee5\u53ef\u80fd\u6362\u4e00\u4e2a\u7f51\u7edc\u73af\u5883\u5c31\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u3002\u6211\u662f\u624b\u52a8\u8bbe\u7f6eProxifier\u7684\u89c4\u5219\uff0c\u8ba9security.ubuntu.com\u8d70\u4ee3\u7406\u7ed5\u8fc7\u53bb\u7684\u3002\u53e6\u5916\uff0c\u9ed8\u8ba4\u7684\u6e90\u662fus.archive.ubuntu.com\uff0c\u53ef\u4ee5\u5148vagrant ssh\u8fdb\u5165\u7cfb\u7edf\uff0c\u624b\u52a8\u8bbe\u7f6e\u6e90\u4e3acn.archive.ubuntu.com\u6216\u8005mirrors.163.com\uff0c\u901f\u5ea6\u4f1a\u5feb\u4e00\u70b9\u3002  \u5982\u679c\u9700\u8981\u5982\u4e0b\u9519\u8bef\uff1a  Could not get lock /var/lib/apt/lists/lock - open (11: Resource temporarily unavailable)  \u8bf4\u660e\u662f\u4e4b\u524d\u5f02\u5e38\u9000\u51fa\uff0c\u540e\u53f0\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\u51b2\u7a81\u5bfc\u81f4\u7684\uff0cvagrant ssh\u8fdb\u53bb\u5e72\u6389apt\u8fdb\u7a0b\uff0c\u518dvagrant up\u5c31\u53ef\u4ee5\u4e86\u3002", 
            "title": "\u8fd0\u884cVagrant"
        }, 
        {
            "location": "/installation/#vagrant-vm", 
            "text": "vagrant ssh", 
            "title": "\u8fdb\u5165Vagrant VM"
        }, 
        {
            "location": "/installation/#docker-compose", 
            "text": "\u4fdd\u5b58\u5982\u4e0b\u5185\u5bb9\u5230install_dockercompose.sh\uff1a  #!/bin/sh\n\n# docker-compose\ncurl -L https://github.com/docker/compose/releases/download/1.7.1/docker-compose-`uname -s`-`uname -m`   /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\n\n# write docker command\n## display docker process\ncat   /bin/dp  END\n#!/bin/sh\n\n# display docker process\ndocker ps -a\nEND\nchmod +x /bin/dp\n\n## rm container with Docker Container ID/Names\ncat   /bin/dr  END\n#!/bin/sh\n\n## container with Docker Container ID/Names\nif [ \\$# -lt 1 ]; then\n    echo  \\$0 id/name \n    echo  rm container with Docker Container ID/Names \n    exit 1\nfi\nid=\\$1\ncontainerid=\\$(docker ps -a|awk '{if ((\\$1~/' \\$id '/ || \\$NF~/' \\$id '/)   NR  1) {print \\$1,\\$NF;}}')\necho  stop/rm containerid:  \\$containerid\ndocker stop \\$containerid\ndocker rm \\$containerid\nEND\nchmod +x /bin/dr\n\n## docker images\ncat   /bin/dm  END\n#!/bin/sh\n\ndocker images\nEND\nchmod +x /bin/dm\n\n## docker rm images\ncat   /bin/dri  END\n#!/bin/sh\n\n## container with Docker Image ID/Names\nif [ \\$# -lt 1 ]; then\n    image_id=\\$(docker images |awk '{if (\\$1~/ none /) {print \\$3;}}')\n    docker rmi -f \\$image_id\n    exit 0\nfi\nid=\\$1\nimage_id=\\$(docker images |awk '{if (\\$1~/ none / || \\$1~/' $id '/ || \\$3~/' \\$id '/) {print \\$3;}}')\ndocker rmi -f \\$image_id\nEND\nchmod +x /bin/dri\n\n## docker exec\ncat   /bin/de  END\n#!/bin/sh\n\nif [ \\$# -lt 1 ] ; then\n    echo  usage: de docker_id \n    exit 0\nfi\n# exec into\ndocker exec -it \\$1 /bin/bash\nEND\nchmod +x /bin/de\n\n## docker logs\ncat   /bin/dl  END\n#!/bin/sh\n\nif [ \\$# -lt 1 ] ; then\n    echo  usage: dl docker_id \n    exit 0\nfi\n# logs\ndocker logs -f \\$1\nEND\nchmod +x /bin/dl  \u7136\u540e\u8fd0\u884c\u811a\u672c\uff1a  chmod +x install_dockercompose.sh\n./install_dockercompose.sh", 
            "title": "\u5b89\u88c5docker-compose"
        }, 
        {
            "location": "/installation/#_3", 
            "text": "\u7f16\u8f91\u4e00\u4e2adocker-compose.yml\u6587\u4ef6\uff1a  # membersrvc\nmembersrvc:\n  image: hyperledger/fabric-membersrvc\n  ports:\n    -  50051:50051 \n  command: membersrvc\n\n# validating peers\n# running with the CA\nvp0:\n  image: hyperledger/fabric-peer\n  ports:\n    -  5000:5000 \n    -  30303:30303 \n    -  30304:30304 \n  environment:\n    - CORE_PEER_ADDRESSAUTODETECT=true\n    - CORE_VM_ENDPOINT=unix:///var/run/docker.sock\n    - CORE_LOGGING_LEVEL=DEBUG\n    - CORE_PEER_ID=vp0\n    - CORE_SECURITY_ENROLLID=test_vp0\n    - CORE_SECURITY_ENROLLSECRET=MwYpmSRjupbT\n  links:\n    - membersrvc\n  command: sh -c  sleep 5; peer node start --peer-chaincodedev   \u7136\u540e\u8fd0\u884cdocker-compose up\u5c31\u8d77\u6765\u4e86\uff0c\u53ef\u4ee5\u901a\u8fc7peer\u547d\u4ee4\u6267\u884cchaincode\u7684deploy/invoke\u7b49\u64cd\u4f5c\u3002", 
            "title": "\u8fd0\u884c\u5355\u8282\u70b9\u7f51\u7edc"
        }, 
        {
            "location": "/installation/#_4", 
            "text": "Vagrant\u542f\u52a8VM\u7684\u65b9\u5f0f\u81ea\u52a8\u4f1a\u5b89\u88c5Docker\u548c\u7f16\u8bd1Docker\u955c\u50cf\u6587\u4ef6\uff0c\u7136\u540e\u518d\u8fd0\u884cFabric\u3002\u5982\u679c\u6709Docker\u7684\u8fd0\u884c\u73af\u5883\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u540cdocker-compose\u4e00\u6837\u542f\u52a8\u670d\u52a1\u4e86\u3002\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u5c31\u662f\uff1a", 
            "title": "\u955c\u50cf\u542f\u52a8\u8fd0\u884c"
        }, 
        {
            "location": "/installation/#docker", 
            "text": "\u5404\u79cd\u73af\u5883\u7684\u5b89\u88c5\u53c2\u8003\uff1a Docker\u5b89\u88c5 \uff0c[\u5b89\u88c5docker-compose]\u3002", 
            "title": "\u5b89\u88c5Docker"
        }, 
        {
            "location": "/installation/#docker_1", 
            "text": "docker pull hyperledger/fabric-membersrvc\ndocker pull hyperledger/fabric-peer", 
            "title": "\u4e0b\u8f7dDocker\u955c\u50cf"
        }, 
        {
            "location": "/installation/#fabric", 
            "text": "\u53c2\u8003\uff1a[\u8fd0\u884c\u5355\u8282\u70b9\u7f51\u7edc]\u3002", 
            "title": "\u542f\u52a8Fabric\u670d\u52a1"
        }, 
        {
            "location": "/installation/#_5", 
            "text": "\u6e90\u7801\u7684\u5b89\u88c5\u4ee5Ubuntu/Deian\u64cd\u4f5c\u7cfb\u7edf\u4e3a\u4f8b\u3002", 
            "title": "\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5"
        }, 
        {
            "location": "/installation/#_6", 
            "text": "\u5b89\u88c5Go   Go\u5b89\u88c5\u5305\u4e0b\u8f7d \uff0c\u8fd9\u4e2a\u5e94\u8be5\u4e5f\u662f\u8981\u7ffb\u5899\u4e0b\u7684\u3002   \u5b89\u88c5Docker   \u5404\u79cd\u73af\u5883\u7684\u5b89\u88c5\u53c2\u8003\uff1a Docker\u5b89\u88c5 \uff0c[\u5b89\u88c5docker-compose]\u3002  \u5982\u679c\u8981\u975eroot\u73af\u5883\u6267\u884cdocker\u547d\u4ee4\uff0c\u53ef\u4ee5\u628a\u7528\u6237xxx\u6dfb\u52a0\u5230docker\u7ec4\uff1a  usermod -a -G docker xxx   \u914d\u7f6e\u73af\u5883\u53d8\u91cf   \u8bf7\u81ea\u884c\u66ff\u6362\u4e0b\u9762GOPATH\u7684\u8bbe\u7f6e\uff1a  claritys-MBP:~ clarity$ cat ~/.profile\nexport GOROOT=/usr/local/go\nexport GOPATH=/Users/clarity/Projects\nexport PATH=$PATH:/usr/local/sbin   \u5b89\u88c5Git\u5e76\u4e0b\u8f7d\u6e90\u7801   mkdir -p $GOPATH/src/github.com/hyperledger\ncd $GOPATH/src/github.com/hyperledger\ngit clone https://github.com/hyperledger/fabric.git   \u5b89\u88c5RocksDB   apt-get install -y libsnappy-dev zlib1g-dev libbz2-dev\ncd /tmp\ngit clone https://github.com/facebook/rocksdb.git\ncd rocksdb\ngit checkout v4.1\nPORTABLE=1 make shared_lib\nINSTALL_PATH=/usr/local make install-shared   \u5b89\u88c5pip   apt-get install -y python-pip\npip install --upgrade pip\npip install behave nose docker-compose\npip install -I flask#####0.10.1 python-dateutil#####2.2 pytz#####2014.3 pyyaml#####3.10 couchdb#####1.0 flask-cors#####2.0.1 requests#####2.4.3   \u9519\u8bef\uff1aRelease: The following signatures couldn t be verified because the public key is not available: \n NO_PUBKEY 2EA8F35793D8809A   apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 2EA8F35793D8809   \u9519\u8bef\uff1apeer: error while loading shared libraries: librocksdb.so.4.1: cannot open shared object file: No such file or directory   cp /usr/local/lib/librocksdb.so.4.1* /usr/lib/  \u4e5f\u53ef\u4ee5\u628a/usr/local/lib\u76ee\u5f55\u589e\u52a0\u5230/etc/ld.so.conf\u76ee\u5f55\u4e0b\u3002\u6216\u8005\u7f16\u8bd1\u7684\u65f6\u5019\u6539\u6210\uff1aINSTALL_PATH=/usr make install-shared", 
            "title": "\u51c6\u5907\u5de5\u4f5c"
        }, 
        {
            "location": "/installation/#docker_2", 
            "text": "cd $GOPATH/src/github.com/hyperledger/fabric\nmake membersrvc-image\nmake peer-image", 
            "title": "\u7f16\u8bd1Docker\u955c\u50cf"
        }, 
        {
            "location": "/installation/#fabric_1", 
            "text": "\u53c2\u8003\uff1a[\u8fd0\u884c\u5355\u8282\u70b9\u7f51\u7edc]\u3002", 
            "title": "\u8fd0\u884cFabric\u670d\u52a1"
        }, 
        {
            "location": "/translations/", 
            "text": "\u539f\u521b\u7ffb\u8bd1", 
            "title": "\u539f\u521b\u7ffb\u8bd1"
        }, 
        {
            "location": "/translations/#_1", 
            "text": "", 
            "title": "\u539f\u521b\u7ffb\u8bd1"
        }, 
        {
            "location": "/news/", 
            "text": "\u884c\u4e1a\u52a8\u6001", 
            "title": "\u884c\u4e1a\u52a8\u6001"
        }, 
        {
            "location": "/news/#_1", 
            "text": "", 
            "title": "\u884c\u4e1a\u52a8\u6001"
        }, 
        {
            "location": "/resources/", 
            "text": "\u6280\u672f\u7c7b\n\n\n\n\nHyperledger fabric\n\n\nNXT\u767d\u76ae\u4e66\u4e2d\u6587\u7248\n\n\nPoX\u7684\u6218\u4e89\u2014\u2014\u533a\u5757\u94fe\u6280\u672f\u5728\u91d1\u878d\u5de5\u5177\u4e2d\u7684\u5e94\u7528\n\n\n\n\n\u4ea7\u54c1\u7c7b\n\n\n\n\nHyperledger\n\n\n\n\n\u89c6\u9891\u7c7b\n\n\n\n\nBlockchain in a Global Context\n\n\n\n\n\u65b0\u95fb\u7c7b\n\n\n\n\nCoinDesk", 
            "title": "\u7f51\u7edc\u8d44\u6e90"
        }, 
        {
            "location": "/resources/#_1", 
            "text": "Hyperledger fabric  NXT\u767d\u76ae\u4e66\u4e2d\u6587\u7248  PoX\u7684\u6218\u4e89\u2014\u2014\u533a\u5757\u94fe\u6280\u672f\u5728\u91d1\u878d\u5de5\u5177\u4e2d\u7684\u5e94\u7528", 
            "title": "\u6280\u672f\u7c7b"
        }, 
        {
            "location": "/resources/#_2", 
            "text": "Hyperledger", 
            "title": "\u4ea7\u54c1\u7c7b"
        }, 
        {
            "location": "/resources/#_3", 
            "text": "Blockchain in a Global Context", 
            "title": "\u89c6\u9891\u7c7b"
        }, 
        {
            "location": "/resources/#_4", 
            "text": "CoinDesk", 
            "title": "\u65b0\u95fb\u7c7b"
        }
    ]
}